(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{38507:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(63115)}])},63115:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>el});var a=t(37876),r=t(14232),i=t(89983),l=t(89081),n=t(72195),c=t(70641),d=t(65390),o=t(72671),u=t(72422),x=t(22060),h=t(37581),m=t(89549);function p(){return(0,a.jsx)(n.av,{value:"analytics",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Writing Patterns"}),(0,a.jsx)(l.BT,{children:"Your most productive writing times"})]}),(0,a.jsx)(l.Wu,{className:"h-[300px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Writing patterns visualization would appear here"})]})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Word Count Progress"}),(0,a.jsx)(l.BT,{children:"Your progress towards your word count goals"})]}),(0,a.jsx)(l.Wu,{className:"h-[300px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Word count progress chart would appear here"})]})})]})]})})}var j=t(65104),g=t(59119),v=t(11158),f=t(23157),y=t(94723),N=t(12099),b=t(22676),w=t(57391),C=t(97685);let k=function(e){let{isOpen:s,onClose:t,manuscript:r,setRefresh:l,refresh:n}=e,{token:c}=(0,N.A)(),d=async()=>{try{let e=await (0,y.uL)(r._id,c);"success"===e.status?(C.Ay.success("Manuscript deleted successfully"),l(!n),t()):C.Ay.error(e.message||"Failed to delete manuscript")}catch(e){console.error("Error deleting manuscript:",e),C.Ay.error("Network error, please try again.")}};return(0,a.jsx)(w.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(w.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(w.c7,{children:[(0,a.jsx)(w.L3,{children:"Delete Manuscript"}),(0,a.jsx)(w.rr,{children:"Are you sure you want to delete this manuscript?"})]}),(0,a.jsx)("div",{className:"mt-4 text-primary",children:(0,a.jsx)("p",{children:null==r?void 0:r.title})}),(0,a.jsxs)(w.Es,{children:[(0,a.jsx)(i.$,{variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(i.$,{className:"bg-primary",onClick:d,children:"Delete"})]})]})})};var S=t(53397),A=t(35627),T=t(83707),E=t(78069);function W(e){let{isOpen:s,onClose:t,manuscript:l,refresh:n,setRefresh:c}=e,[d,o]=(0,r.useState)(!1),[u,x]=(0,r.useState)((null==l?void 0:l.title)||""),[h,m]=(0,r.useState)((null==l?void 0:l.subTitle)||""),[p,j]=(0,r.useState)((null==l?void 0:l.author)||""),[g,v]=(0,r.useState)((null==l?void 0:l.publisher)||""),[f,b]=(0,r.useState)((null==l?void 0:l.ISBN)||""),[k,W]=(0,r.useState)((null==l?void 0:l.genre)||""),[F,M]=(0,r.useState)((null==l?void 0:l.targetCount)||5e4),[B,R]=(0,r.useState)((null==l?void 0:l.description)||""),[_,L]=(0,r.useState)((null==l?void 0:l.coverdesignby)||""),[Z,D]=(0,r.useState)((null==l?void 0:l.coverillustrationby)||""),[O,$]=(0,r.useState)((null==l?void 0:l.editedby)||""),[J,G]=(0,r.useState)((null==l?void 0:l.edition)||""),{token:P,user:I}=(0,N.A)();(0,r.useEffect)(()=>{l&&(x(l.title),m(l.subTitle),j(l.author),v(l.publisher),b(l.ISBN),W(l.genre),M(l.targetCount||5e4),R(l.description),L(l.coverdesignby||""),D(l.coverillustrationby||""),$(l.editedby||""),G(l.edition||""))},[l]);let U=async e=>{if(e.preventDefault(),!d){o(!0);try{await (0,y.oB)(I,P,{title:u,subTitle:h,author:p,publisher:g,description:B,ISBN:f,genre:k,targetCount:F,coverdesignby:_,coverillustrationby:Z,editedby:O,edition:J},l._id)?(C.oR.success("Manuscript updated successfully"),t(),c(!n)):C.oR.error("Failed to update manuscript")}catch(e){C.oR.error(e.message)}finally{o(!1)}}};return(0,a.jsx)(w.lG,{open:s,onOpenChange:t,children:(0,a.jsx)(w.Cf,{className:"sm:max-w-[750px]",children:(0,a.jsxs)("div",{className:"max-h-[80vh] overflow-y-auto pr-1",children:[(0,a.jsxs)(w.c7,{children:[(0,a.jsx)(w.L3,{children:"Edit Manuscript"}),(0,a.jsx)(w.rr,{children:"Enter the details for your manuscript. You can edit them later."})]}),(0,a.jsxs)("form",{onSubmit:U,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 grid-cols-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(S.p,{id:"title",className:"mt-2",value:u,onChange:e=>x(e.target.value),placeholder:"Enter manuscript title",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"subTitle",children:"Sub Title (optional)"}),(0,a.jsx)(S.p,{id:"subTitle",className:"mt-2",value:h,onChange:e=>m(e.target.value),placeholder:"Enter manuscript sub-title"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 grid-cols-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"author",children:"Author"}),(0,a.jsx)(S.p,{className:"mt-2",id:"author",value:p,onChange:e=>j(e.target.value),placeholder:"Your name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"publisher",children:"Publisher (optional)"}),(0,a.jsx)(S.p,{className:"mt-2",id:"publisher",value:g,onChange:e=>v(e.target.value),placeholder:"Enter publisher name"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 grid-cols-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"coverdesignby",children:"Cover Design By (optional)"}),(0,a.jsx)(S.p,{className:"mt-2",id:"coverdesignby",value:_,onChange:e=>L(e.target.value),placeholder:"Enter designer's name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"coverillustrationby",children:"Cover Illustration By (optional)"}),(0,a.jsx)(S.p,{className:"mt-2",id:"coverillustrationby",value:Z,onChange:e=>D(e.target.value),placeholder:"Enter illustrator's name"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 grid-cols-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"editedby",children:"Edited By (optional)"}),(0,a.jsx)(S.p,{className:"mt-2",id:"editedby",value:O,onChange:e=>$(e.target.value),placeholder:"Enter editor's name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"edition",children:"Edition (optional)"}),(0,a.jsx)(S.p,{className:"mt-2",id:"edition",value:J,onChange:e=>G(e.target.value),placeholder:"e.g. First Edition"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"ISBN",children:"ISBN (optional)"}),(0,a.jsx)(S.p,{className:"mt-2",id:"ISBN",value:f,onChange:e=>b(e.target.value),placeholder:"e.g. 978-3-16-148410-0"})]}),(0,a.jsxs)("div",{className:"grid gap-2 w-full",children:[(0,a.jsx)(A.J,{htmlFor:"genre",children:"Genre"}),(0,a.jsxs)(T.l6,{value:k,onValueChange:W,required:!0,children:[(0,a.jsx)(T.bq,{id:"genre",className:"w-full",children:(0,a.jsx)(T.yv,{placeholder:"Select genre"})}),(0,a.jsxs)(T.gC,{children:[(0,a.jsx)(T.eb,{value:"Fiction",children:"Fiction"}),(0,a.jsx)(T.eb,{value:"Mystery",children:"Mystery"}),(0,a.jsx)(T.eb,{value:"Thriller",children:"Thriller"}),(0,a.jsx)(T.eb,{value:"Romance",children:"Romance"}),(0,a.jsx)(T.eb,{value:"Sci-Fi",children:"Science Fiction"}),(0,a.jsx)(T.eb,{value:"Fantasy",children:"Fantasy"}),(0,a.jsx)(T.eb,{value:"Horror",children:"Horror"}),(0,a.jsx)(T.eb,{value:"Non-Fiction",children:"Non-Fiction"}),(0,a.jsx)(T.eb,{value:"Memoir",children:"Memoir"}),(0,a.jsx)(T.eb,{value:"Biography",children:"Biography"}),(0,a.jsx)(T.eb,{value:"Other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2 sm:col-span-1 md:col-span-2",children:[(0,a.jsx)(A.J,{htmlFor:"targetCount",children:"Target Word Count"}),(0,a.jsx)(S.p,{id:"targetCount",type:"number",min:1e3,value:F,onChange:e=>M(parseInt(e.target.value,10)),required:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Common targets: Novel (50,000–100,000), Novella (20,000–50,000), Short Story (1,000–20,000)"})]}),(0,a.jsxs)("div",{className:"space-y-2 sm:col-span-1 md:col-span-2",children:[(0,a.jsx)(A.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(E.T,{id:"description",value:B,onChange:e=>R(e.target.value),rows:4})]})]})]}),(0,a.jsxs)(w.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(i.$,{disabled:d,type:"submit",children:d?"Updating Manuscript...":"Update Manuscript"})]})]})]})})})}function F(e){let{refresh:s,setRefresh:t}=e,{token:c,user:d,updateUser:o}=(0,N.A)(),[x,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)([]),[w,S]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[E,F]=(0,r.useState)(!1),[M,B]=(0,r.useState)(null),[R,_]=(0,r.useState)(d.selectedManuscript||null);(0,r.useEffect)(()=>{c&&(async()=>{try{S(!0);let e=await (0,y.ug)(c);"success"===e.status?p(e.data):C.Ay.error(e.message||"Failed to fetch manuscripts.")}catch(e){C.Ay.error(e.message)}finally{S(!1)}})()},[c,s]);let L=async e=>{if(d.selectedManuscript._id===e._id)return;let a=await (0,y.DG)({selectedManuscript:e._id},c);"success"!==a.status?C.Ay.error(a.message):(o(a.user),C.Ay.success("Manuscript Changed!"),_(e),t(!s))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.av,{value:"manuscripts",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(l.Zp,{className:"flex flex-col items-center justify-center border-dashed border-[1px]",children:(0,a.jsxs)("div",{className:" text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-manuscript-purple-100 dark:bg-manuscript-purple-900/30",children:(0,a.jsx)(j.A,{className:"h-8 w-8 text-manuscript-purple-600 dark:text-manuscript-purple-300"})}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Create a new manuscript"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Start a new writing project or import an existing one"}),(0,a.jsx)("div",{className:"mt-6 flex gap-2 justify-center",children:(0,a.jsx)(i.$,{onClick:()=>h(!0),children:"New Manuscript"})})]})}),w?(0,a.jsx)(l.Zp,{className:"flex items-center justify-center min-h-[270px]",children:(0,a.jsx)("span",{children:(0,a.jsx)(f.A,{})})}):0===m.length?(0,a.jsx)(l.Zp,{className:"flex items-center justify-center min-h-[270px]",children:(0,a.jsx)("span",{className:"text-muted-foreground",children:"No manuscripts found"})}):m.map(e=>{var s,t;return(0,a.jsxs)(l.Zp,{className:"flex flex-col justify-between border border-gray-200 dark:border-gray-800 rounded-2xl shadow-sm bg-gradient-to-br from-white to-manuscript-purple-50 dark:from-gray-950 dark:to-manuscript-purple-950/60",children:[(0,a.jsxs)(l.Wu,{className:"p-6 pb-4 flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-manuscript-purple-700 dark:text-manuscript-purple-200 truncate max-w-[200px]",title:e.title,children:e.title}),(0,a.jsx)("span",{className:"bg-primary px-2 py-1 rounded-full text-white text-xs font-medium",children:e.genre})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-primary",children:"Word Count"}),(0,a.jsxs)("span",{className:"font-medium",children:[(null==(s=e.wordCount)?void 0:s.toLocaleString())||0," /"," ",(null==(t=e.targetCount)?void 0:t.toLocaleString())||0]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u.k,{value:e.progress,className:"h-2 rounded-lg"}),(0,a.jsx)("div",{className:"flex justify-between text-xs mt-1",children:(0,a.jsxs)("span",{children:[e.targetCount?Math.round(e.wordCount/e.targetCount*100):0,"%"]})})]})]}),(0,a.jsxs)(l.wL,{className:"p-6 pt-0 flex gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",className:"flex-1 ".concat((null==R?void 0:R._id)===e._id?"bg-primary text-white":""),onClick:()=>L(e),disabled:(null==R?void 0:R._id)===e._id,children:"Select Manuscript"}),(0,a.jsxs)(b.rI,{children:[(0,a.jsx)(b.ty,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"outline",size:"icon",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(b.SQ,{align:"end",children:[(0,a.jsx)(b._2,{onClick:()=>{F(!0),_(e)},children:"Edit"}),(null==R?void 0:R._id)!==e._id&&(0,a.jsx)(b._2,{onClick:()=>{B(e),T(!0)},children:"Delete"})]})]})]})]},e.id)})]})}),(0,a.jsx)(v.A,{isOpen:x,onClose:()=>h(!1),refresh:s,setRefresh:t}),(0,a.jsx)(k,{isOpen:A,onClose:()=>T(!1),setRefresh:t,refresh:s,manuscript:M}),(0,a.jsx)(W,{isOpen:E,onClose:()=>F(!1),manuscript:R,refresh:s,setRefresh:t})]})}function M(e){let{isOpen:s,onClose:t,onSubmit:l}=e,[c,d]=(0,r.useState)("paste"),[o,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(null);return(0,a.jsx)(w.lG,{open:s,onOpenChange:e=>e||t(),children:(0,a.jsxs)(w.Cf,{children:[(0,a.jsxs)(w.c7,{children:[(0,a.jsx)(w.L3,{children:"Import Manuscript"}),(0,a.jsx)(w.rr,{children:"Select import method"})]}),(0,a.jsxs)(n.tU,{value:c,onValueChange:d,children:[(0,a.jsxs)(n.j7,{children:[(0,a.jsx)(n.Xi,{value:"paste",children:"Paste Text"}),(0,a.jsx)(n.Xi,{value:"file",children:"Upload File"})]}),(0,a.jsx)(n.av,{value:"paste",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S.p,{placeholder:"Title",value:o,onChange:e=>u(e.target.value)}),(0,a.jsx)("textarea",{className:"w-full h-40 p-2 border rounded",placeholder:"Paste content here",value:x,onChange:e=>h(e.target.value)})]})}),(0,a.jsx)(n.av,{value:"file",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S.p,{placeholder:"Title",value:o,onChange:e=>u(e.target.value)}),(0,a.jsx)("input",{type:"file",accept:".txt,.md",onChange:e=>p(e.target.files[0]||null)})]})})]}),(0,a.jsxs)(w.Es,{className:"space-x-2",children:[(0,a.jsx)(i.$,{variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(i.$,{onClick:()=>{if(o){if("paste"===c)l({title:o,content:x});else if(m){let e=new FileReader;e.onload=e=>{l({title:o,content:e.target.result})},e.readAsText(m)}t()}},children:"Import"})]})]})})}function B(e){let{refresh:s,setRefresh:t}=e,[l,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-2",children:[(0,a.jsxs)("div",{className:"mb-2 md:mb-0",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-primary md:mb-1 mb-2",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Welcome back to ManuscriptPRO. Here's an overview of your writing progress."})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)(i.$,{className:"cursor-pointer bg-primary text-white font-medium py-3 rounded-lg ",onClick:()=>n(!0),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"New Manuscript"]})})]}),(0,a.jsx)(v.A,{isOpen:l,onClose:()=>n(!1),refresh:s,setRefresh:t}),(0,a.jsx)(M,{isOpen:c,onClose:()=>d(!1)})]})}let R=()=>{let{isAuthValid:e,authChecked:s,token:t,user:a}=(0,N.A)();return{shouldMakeApiCall:s&&e&&!!t&&!!a,isLoading:!s,isAuthenticated:e}};var _=t(85515),L=t(89099),Z=t(10841),D=t.n(Z),O=t(97158),$=t(20710),J=t(17471),G=t(38664),P=t(5153),I=t(22333),U=t(69064),Y=t(20783),q=t(45432),V=t(28852),z=t(20741),X=t(95952);function H(){let e=(0,L.useRouter)();return(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Quick Actions"}),(0,a.jsx)(l.BT,{children:"Common tasks and shortcuts"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>e.push("/dashboard/editor"),className:"justify-start border-purple-200 text-purple-700 hover:bg-purple-50 dark:border-purple-800/30 dark:text-purple-300 dark:hover:bg-purple-900/20",children:[(0,a.jsx)(V.A,{className:"mr-2 h-4 w-4 text-purple-600 dark:text-purple-400"}),"Continue Writing"]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>e.push("/dashboard/publishing-checklist"),className:"justify-start border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800/30 dark:text-teal-300 dark:hover:bg-teal-900/20",children:[(0,a.jsx)(z.A,{className:"mr-2 h-4 w-4 text-teal-600 dark:text-teal-400"}),"View Checklist"]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>e.push("/dashboard/formatting-wizard"),className:"justify-start border-amber-200 text-amber-700 hover:bg-amber-50 dark:border-amber-800/30 dark:text-amber-300 dark:hover:bg-amber-900/20",children:[(0,a.jsx)(X.A,{className:"mr-2 h-4 w-4 text-amber-600 dark:text-amber-400"}),"Export"]})]})})]})}let K=e=>{let{active:s,payload:t,label:r}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Date: ".concat(r)}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Words: ".concat(t[0].value)})]}):null},Q=e=>{let{iconBg:s,iconColor:t}=e;return(0,a.jsxs)(l.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"}),(0,a.jsx)("div",{className:"p-2 ".concat(s," rounded-full"),children:(0,a.jsx)("div",{className:"h-4 w-4 ".concat(t," opacity-50")})})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16 animate-pulse mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-100 rounded w-32 animate-pulse"})]})]})};function ee(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)({}),[c,o]=(0,r.useState)([]),[u,x]=(0,r.useState)("7"),{token:m}=(0,N.A)(),[p,j]=(0,r.useState)(!0),[g,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{m&&(async()=>{j(!0);try{let e=await fetch("https://apis.manuscripthq.com/api/recentactivity/user-activities",{method:"GET",headers:{"Content-Type":"application/json","auth-token":m}}),t=await e.json();"success"===t.status?s(t.data):C.Ay.error(t.message||"Failed to load activities."),j(!1)}catch(e){C.Ay.error("Failed to load activities."),console.error("Error fetching activities:",e),j(!1)}})()},[m]),(0,r.useEffect)(()=>{m&&(async()=>{v(!0);try{let e=await fetch("https://apis.manuscripthq.com/api/section/get/dashboardCount",{method:"GET",headers:{"Content-Type":"application/json","auth-token":m}}),s=await e.json();"success"===s.status?i(s.data):C.Ay.error(s.message||"Failed to load counts."),v(!1)}catch(e){C.Ay.error("Failed to load counts."),console.error("Error fetching counts:",e),v(!1)}})()},[m]),(0,r.useEffect)(()=>{m&&(async()=>{b(!0);try{let e=await fetch("https://apis.manuscripthq.com/api/section/get/daily-word-count?days=".concat(u),{method:"GET",headers:{"Content-Type":"application/json","auth-token":m}}),s=await e.json();if("success"===s.status){let e=s.data.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),wordCount:e.wordCount,fullDate:e.date})).reverse();o(e)}else C.Ay.error(s.message||"Failed to load writing activity.");b(!1)}catch(e){C.Ay.error("Failed to load writing activity."),console.error("Error fetching writing activity:",e),b(!1)}})()},[m,u]),(0,a.jsx)(n.tU,{defaultValue:"overview",children:(0,a.jsxs)(n.av,{value:"overview",className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{iconBg:"bg-blue-100",iconColor:"text-blue-600"}),(0,a.jsx)(Q,{iconBg:"bg-green-100",iconColor:"text-green-600"}),(0,a.jsx)(Q,{iconBg:"bg-orange-100",iconColor:"text-orange-600"}),(0,a.jsx)(Q,{iconBg:"bg-purple-100",iconColor:"text-purple-600"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium text-gray-600",children:"Total Manuscripts"}),(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,a.jsx)(d.A,{className:"h-4 w-4 text-blue-600"})})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:t.manuscriptCount||0}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[1===t.manuscriptCount?"manuscript":"manuscripts"," in progress"]})]})]}),(0,a.jsxs)(l.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium text-gray-600",children:"Words Written"}),(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4 text-green-600",children:(0,a.jsx)("path",{d:"M16 18V6m-8 6v6M8 6v4"})})})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(t.totalWordCount||0).toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Total words across all manuscripts"})]})]}),(0,a.jsxs)(l.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium text-gray-600",children:"Writing Streak"}),(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-full",children:(0,a.jsx)(O.A,{className:"h-4 w-4 text-orange-600"})})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:t.writingStreak||0}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:1===t.writingStreak?"day":"days"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.writingStreak>0?"Keep it up!":"Start your streak today!"})]})]}),(0,a.jsxs)(l.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-sm font-medium text-gray-600",children:"Writing Time"}),(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-full",children:(0,a.jsx)($.A,{className:"h-4 w-4 text-primary"})})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:t.totalWritingTime||0}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"min"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.totalWritingTime>60?"".concat(Math.floor((t.totalWritingTime||0)/60),"h ").concat((t.totalWritingTime||0)%60,"m total"):"Total writing time"})]})]})]})}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{children:"Writing Activity"}),(0,a.jsxs)(l.BT,{children:["Your daily word count for the past ",u," days"]})]}),(0,a.jsxs)(T.l6,{value:u,onValueChange:e=>{x(e)},children:[(0,a.jsx)(T.bq,{className:"w-[100px]",children:(0,a.jsx)(T.yv,{placeholder:"Days"})}),(0,a.jsxs)(T.gC,{children:[(0,a.jsx)(T.eb,{value:"7",children:"7 days"}),(0,a.jsx)(T.eb,{value:"15",children:"15 days"}),(0,a.jsx)(T.eb,{value:"30",children:"30 days"})]})]})]})}),(0,a.jsx)(l.Wu,{children:y?(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,a.jsx)(f.A,{})}):0===c.length?(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{children:"No writing activity data available"})]})}):(0,a.jsx)("div",{className:"h-[240px] w-full",children:(0,a.jsx)(G.u,{width:"100%",height:"100%",children:(0,a.jsxs)(P.E,{data:c,children:[(0,a.jsx)(I.W,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#6b7280"}}),(0,a.jsx)(U.h,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),(0,a.jsx)(Y.m,{content:(0,a.jsx)(K,{})}),(0,a.jsx)(q.y,{dataKey:"wordCount",fill:"#eaa8f9",radius:[4,4,0,0],className:"hover:opacity-80 transition-opacity"})]})})})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Recent Activity"}),(0,a.jsx)(l.BT,{children:"Your recent writing activity"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:p?(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,a.jsx)(f.A,{})}):0===e.length?(0,a.jsx)("div",{className:"flex justify-center items-center text-center text-muted-foreground",children:(0,a.jsx)("p",{children:"No recent activities found."})}):e.map((e,s)=>(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full",children:(0,a.jsx)(J.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.manuscriptTitle," • ",new Date(e.createdAt).toLocaleString()]})]})]})},s))})})]})]}),(0,a.jsx)(H,{})]})})}function es(e){var s,t,h,m;let{refresh:j,setRefresh:g}=e,v=(0,L.useRouter)(),{user:f,token:b}=(0,N.A)(),{shouldMakeApiCall:w,isLoading:C}=R(),[k,S]=(0,r.useState)([]),[A,T]=(0,r.useState)(!0),[E,M]=(0,r.useState)("overview");(0,r.useEffect)(()=>{var e;if(!w||!(null==f||null==(e=f.selectedManuscript)?void 0:e._id))return void T(!1);(async()=>{T(!0);try{let e=await (0,y.W3)(f.selectedManuscript._id,b);S([e])}catch(e){console.error("Error fetching manuscript:",e)}finally{T(!1)}})()},[b,j,null==f?void 0:f.selectedManuscript,w]);let Z=k[0],O=Z&&Z.wordCount&&Z.targetCount?Math.min(Z.wordCount/Z.targetCount*100,100):0,[$,J]=(0,r.useState)(!1),[G,P]=(0,r.useState)(Z||null);return C?(0,a.jsx)(_.Gw,{message:"Checking authentication...",showLogo:!0}):(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-6 pt-6",children:[(0,a.jsx)(B,{refresh:j,setRefresh:g}),A?(0,a.jsx)(_.Gw,{message:"Loading your manuscript...",showLogo:!1}):Z?(0,a.jsxs)(l.Zp,{className:"border-manuscript-purple-200 dark:border-manuscript-purple-800/30",children:[(0,a.jsx)(l.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ZB,{className:"text-2xl text-primary flex items-center gap-2",children:[Z.title," ",(0,a.jsx)(c.A,{onClick:()=>{P(Z),J(!0)},size:18})]}),(0,a.jsxs)(l.BT,{children:[Z.genre," • Last edited"," ",Z.updatedAt?D()(Z.updatedAt).format("Do MMMM, YYYY"):"—"]})]}),(0,a.jsx)(x.E,{variant:"outline",className:"bg-primary text-white border-none",children:"Current Project"})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Word Count"}),(0,a.jsxs)("span",{className:"font-medium",children:[(null==(s=Z.wordCount)?void 0:s.toLocaleString())||0," /"," ",(null==(t=Z.targetCount)?void 0:t.toLocaleString())||0]})]}),(0,a.jsx)(u.k,{value:O,className:"h-2"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 md:justify-center",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Target Word Count"}),(0,a.jsx)("p",{className:"font-medium",children:(null==(h=Z.targetCount)?void 0:h.toLocaleString())||"—"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 md:justify-center",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary",children:(0,a.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Author"}),(0,a.jsx)("p",{className:"font-medium",children:Z.author||"Unknown Author"})]})]})]})}),(0,a.jsxs)(l.wL,{className:"flex gap-2 items-center",children:[(0,a.jsx)(i.$,{onClick:()=>v.push("/dashboard/editor"),className:"bg-primary",children:"Continue Writing"}),(0,a.jsx)(i.$,{onClick:()=>v.push("/dashboard/manuscript"),variant:"outline",className:"border-[#eaa8f9] text-primary",children:"View Structure"})]})]}):(0,a.jsx)("div",{className:"text-center mt-6",children:(0,a.jsx)("p",{className:"text-primary",children:(null==f||null==(m=f.selectedManuscript)?void 0:m._id)?"Please select a manuscript to continue.":"Please add a new manuscript to continue."})}),(0,a.jsxs)(n.tU,{value:E,onValueChange:M,className:"space-y-4",children:[(0,a.jsxs)(n.j7,{className:"bg-[#eaa8f9]",children:[(0,a.jsx)(n.Xi,{value:"overview",className:"data-[state=active]:text-primary cursor-pointer",children:"Overview"}),(0,a.jsx)(n.Xi,{value:"manuscripts",className:"data-[state=active]:text-primary cursor-pointer",children:"Manuscripts"})]}),"overview"===E&&(0,a.jsx)(ee,{}),"analytics"===E&&(0,a.jsx)(p,{}),"manuscripts"===E&&(0,a.jsx)(F,{refresh:j,setRefresh:g})]}),(0,a.jsx)(W,{isOpen:$,onClose:()=>J(!1),manuscript:G,refresh:j,setRefresh:g})]})}var et=t(46953),ea=t(89717),er=t(93327);function ei(){let{isExpanded:e}=(0,er.c)(),[s,t]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,a.jsx)(et.e,{}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 w-0 ".concat(e?"md:ml-64":"md:ml-20"),style:{paddingTop:64},children:[(0,a.jsx)(ea.V,{refresh:s,setRefresh:t}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:(0,a.jsx)(es,{setRefresh:t,refresh:s})})]})]})}function el(){return(0,a.jsx)(er.G,{children:(0,a.jsx)(ei,{})})}},72195:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>d,j7:()=>n,tU:()=>l});var a=t(37876);t(14232);var r=t(90491),i=t(8488);function l(e){let{className:s,...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",s),...t})}},78069:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var a=t(37876),r=t(14232),i=t(8488);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});l.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[716,134,644,121,22,323,669,636,593,792],()=>s(38507)),_N_E=e.O()}]);