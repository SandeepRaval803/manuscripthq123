(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{4970:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/formatting-wizard",function(){return s(86181)}])},86181:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(37876),i=s(14232),r=s(46953),n=s(89717),l=s(93327),d=s(89081),o=s(33276),c=s(96108),m=s(89983),h=s(18632),x=s(12099),p=s(97685),u=s(23157),g=s(69847),f=s(65390),v=s(78572),j=s(71449),y=s(95952),b=s(26913),N=s(1e3),w=s(24105),F=s(69628);let S=[{id:"theme",name:"Theme",icon:g.A},{id:"metadata",name:"Metadata",icon:f.A},{id:"preview",name:"Preview",icon:v.A},{id:"export",name:"Export",icon:j.A}],k={fiction:{fontFamily:"ui-serif, Georgia, serif",fontSize:"12pt",lineHeight:"1.6",margins:"2rem",firstLetterStyle:!0},"non-fiction":{fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSize:"11pt",lineHeight:"1.5",margins:"1.5rem",firstLetterStyle:!1},children:{fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSize:"14pt",lineHeight:"1.8",margins:"2.5rem",firstLetterStyle:!1},textbooks:{fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSize:"10pt",lineHeight:"1.4",margins:"1rem",firstLetterStyle:!1},memoir:{fontFamily:"ui-serif, Georgia, serif",fontSize:"12pt",lineHeight:"1.7",margins:"2rem",firstLetterStyle:!0}},C=[{value:"fiction",label:"Fiction",description:"Perfect for storytelling and creative writing",icon:y.A},{value:"non-fiction",label:"Non-Fiction",description:"Based on facts, real events, and people",icon:b.A},{value:"children",label:"Children's",description:"Illustrated stories for kids and early readers",icon:N.A},{value:"textbooks",label:"Textbooks",description:"Educational content for students and learning",icon:w.A},{value:"memoir",label:"Memoir",description:"Personal life experiences and reflections",icon:F.A}];var A=s(61613),T=s(35627),E=s(83707),P=s(22963);function z(e){var t;let{metadata:s,manuscriptData:r,getPreviewStyles:n}=e,[l,d]=(0,i.useState)(0),o=n(),h=(null==r?void 0:r.data)?r.data.map((e,t)=>({title:e.sectionTitle,page:t+4})):[],x=[{type:"title",content:(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-full text-center w-full absolute inset-0",children:[(0,a.jsx)("div",{className:"text-4xl font-bold mb-8",children:s.title}),(0,a.jsx)("div",{className:"text-2xl mb-12 italic",children:s.subTitle}),(0,a.jsxs)("div",{className:"text-xl",children:["by ",s.author]})]})},{type:"info",content:(0,a.jsxs)("div",{className:"flex flex-col justify-center  h-full text-left w-full px-6 py-8",children:[(0,a.jsxs)("div",{className:"space-y-2 w-full max-w-md text-gray-700",children:[(0,a.jsxs)("div",{children:["Copyright \xa9 ",new Date().getFullYear()," by"," ",(null==(t=s.author)?void 0:t.trim())||"N/A"]}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{children:"All Rights Reserved."})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"ISBN:"})," ",s.ISBN||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Cover Design By"})," ",s.coverdesignby||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Cover Illustration By"})," ",s.coverillustrationby||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Edited By"})," ",s.editedby||"N/A"]}),(0,a.jsxs)("div",{children:[s.edition||"N/A"," ",(0,a.jsx)("span",{children:"Edition"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"Published By:"})," ",s.publisher||"N/A"]})]}),(0,a.jsx)("div",{className:"mt-7",children:s.description})]})},{type:"toc",content:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Table of Contents"}),(0,a.jsx)("div",{className:"space-y-4",children:h.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between border-b border-dotted border-gray-400 pb-2",children:[(0,a.jsx)("span",{className:"text-lg",children:e.title}),(0,a.jsxs)("span",{className:"text-lg",children:["Page ",e.page]})]},t))})]})},...((null==r?void 0:r.data)||[]).map((e,t)=>({type:"chapter",title:e.sectionTitle,content:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-center text-sm italic text-gray-600 mb-4",children:e.sectionTitle}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:e.sectionTitle}),(0,a.jsx)("div",{className:"text-justify leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})]})}))],p=x[l],u=x.length;return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white shadow-lg border rounded-lg p-8 min-h-[600px] relative",style:o,children:[null==p?void 0:p.content,(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 text-sm text-gray-500",children:["Page ",l+1," of ",u]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsxs)(m.$,{variant:"outline",onClick:()=>d(Math.max(0,l-1)),disabled:0===l,className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[l+1," / ",u]}),(0,a.jsxs)(m.$,{variant:"outline",onClick:()=>d(Math.min(u-1,l+1)),disabled:l===u-1,className:"flex items-center gap-2",children:["Next",(0,a.jsx)(c.A,{className:"h-4 w-4"})]})]})]})}function B(e){let{selectedTheme:t,setSelectedTheme:s,customSettings:i,setCustomSettings:r,metadata:n,manuscriptData:l,getPreviewStyles:o}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Select a Theme"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose a formatting theme for your manuscript"})]}),(0,a.jsx)(A.z,{value:t,onValueChange:s,className:"grid gap-6 md:grid-cols-3",children:null==C?void 0:C.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(A.C,{value:e.value,id:e.value,className:"peer sr-only"}),(0,a.jsxs)(T.J,{htmlFor:e.value,className:"cursor-pointer flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 peer-data-[state=checked]:border-[#eaa8f9] [&:has([data-state=checked])]:border-primary",children:[(0,a.jsx)("div",{className:"mb-4 rounded-md bg-[#eaa8f9] p-2 text-primary",children:(0,a.jsx)(e.icon,{className:"h-6 w-6"})}),(0,a.jsx)("div",{className:"font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:e.description})]})]},e.value))}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Preview"})}),(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsx)(z,{metadata:n,manuscriptData:l,getPreviewStyles:o})})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Customize"})}),(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"font-family",children:"Font Family"}),(0,a.jsxs)(E.l6,{value:i.fontFamily,onValueChange:e=>r({...i,fontFamily:e}),children:[(0,a.jsx)(E.bq,{className:"w-full",children:(0,a.jsx)(E.yv,{})}),(0,a.jsxs)(E.gC,{children:[(0,a.jsx)(E.eb,{value:"serif",children:"Serif"}),(0,a.jsx)(E.eb,{value:"sans-serif",children:"Sans-serif"}),(0,a.jsx)(E.eb,{value:"monospace",children:"Monospace"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"font-size",children:"Font Size"}),(0,a.jsxs)(E.l6,{value:i.fontSize,onValueChange:e=>r({...i,fontSize:e}),children:[(0,a.jsx)(E.bq,{className:"w-full",children:(0,a.jsx)(E.yv,{})}),(0,a.jsxs)(E.gC,{children:[(0,a.jsx)(E.eb,{value:"small",children:"Small (10pt)"}),(0,a.jsx)(E.eb,{value:"medium",children:"Medium (12pt)"}),(0,a.jsx)(E.eb,{value:"large",children:"Large (14pt)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"line-spacing",children:"Line Spacing"}),(0,a.jsxs)(E.l6,{value:i.lineSpacing,onValueChange:e=>r({...i,lineSpacing:e}),children:[(0,a.jsx)(E.bq,{className:"w-full",children:(0,a.jsx)(E.yv,{})}),(0,a.jsxs)(E.gC,{children:[(0,a.jsx)(E.eb,{value:"single",children:"Single"}),(0,a.jsx)(E.eb,{value:"1.5",children:"1.5 lines"}),(0,a.jsx)(E.eb,{value:"double",children:"Double"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"margins",children:"Margins"}),(0,a.jsxs)(E.l6,{value:i.margins,onValueChange:e=>r({...i,margins:e}),children:[(0,a.jsx)(E.bq,{className:"w-full",children:(0,a.jsx)(E.yv,{})}),(0,a.jsxs)(E.gC,{children:[(0,a.jsx)(E.eb,{value:"narrow",children:"Narrow"}),(0,a.jsx)(E.eb,{value:"normal",children:"Normal"}),(0,a.jsx)(E.eb,{value:"wide",children:"Wide"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"manuscript-size",children:"Manuscript Size"}),(0,a.jsxs)(E.l6,{value:i.manuscriptSize,onValueChange:e=>r({...i,manuscriptSize:e}),children:[(0,a.jsx)(E.bq,{className:"w-full",children:(0,a.jsx)(E.yv,{})}),(0,a.jsxs)(E.gC,{children:[(0,a.jsxs)(E.eb,{value:"pocket",children:[" ","4.25 x 6.87 in (10.80 x 17.45 cm)"]}),(0,a.jsxs)(E.eb,{value:"reedsy",children:[" ","5 x 8 in (12.7 x 20.32 cm)"]}),(0,a.jsxs)(E.eb,{value:"digest",children:[" ","5.5 x 8.5 in (13.97 x 21.59 cm)"]}),(0,a.jsxs)(E.eb,{value:"trade",children:[" ","6 x 9 in (15.24 x 22.86 cm)"]})]})]})]})]})}),(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Cover Designs"})}),(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[0,1,2,3,4,5,6,7].map(e=>(0,a.jsx)("img",{src:"/images/fantasy-book-cover-with-mystical-forest.jpg",alt:"Cover design ".concat(e+1),className:"w-full h-auto rounded-md object-cover"},e))})})]})]})]})}function D(e){let{metadata:t,manuscriptData:s,getPreviewStyles:i,selectedTheme:r,exportFormat:n}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Preview Your Book"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Navigate through your book pages to see how it will look when exported"})]}),(0,a.jsx)(z,{metadata:t,manuscriptData:s,getPreviewStyles:i}),s&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Manuscript Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Sections:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:s.count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Theme:"}),(0,a.jsx)("span",{className:"ml-2 font-medium capitalize",children:r})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Format:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:n.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Pages:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:s.count+2})]})]})]})]})}var I=s(29812);function M(e){let{exportFormat:t,setExportFormat:s,manuscriptData:r,metadata:n,getPreviewStyles:l}=e,[d,c]=(0,i.useState)(!1),h=()=>(null==r?void 0:r.data)?r.data.map((e,t)=>({title:e.sectionTitle,page:t+4})):[],x=e=>{if(!e)return"";let t=document.createElement("div");t.innerHTML=e;let s=e=>{let t="";for(let a of e.childNodes)if(a.nodeType===Node.TEXT_NODE)t+=a.textContent;else if(a.nodeType===Node.ELEMENT_NODE){let e=a.tagName.toLowerCase();if("p"===e||"div"===e){let e=s(a);e.trim()&&(t+=e.trim()+"\n\n")}else if("h1"===e||"h2"===e||"h3"===e||"h4"===e||"h5"===e||"h6"===e){let e=s(a);e.trim()&&(t+="\n"+e.trim()+"\n\n")}else if("br"===e)t+="\n";else if("li"===e){let e=s(a);e.trim()&&(t+="â€¢ "+e.trim()+"\n")}else if("strong"===e||"b"===e){let e=s(a);e.trim()&&(t+=e.trim())}else if("em"===e||"i"===e){let e=s(a);e.trim()&&(t+=e.trim())}else{let e=s(a);e.trim()&&(t+=e.trim())}}return t},a=s(t);return a.replace(/\n\s*\n\s*\n/g,"\n\n").replace(/[ \t]+/g," ").trim()},u=async()=>{try{console.log("Starting PDF export..."),await g()}catch(e){throw console.error("PDF generation error details:",e),console.error("Error stack:",e.stack),Error("Failed to generate PDF: ".concat(e.message))}},g=async()=>{let e=document.querySelector('script[src*="jspdf"]');if(e||((e=document.createElement("script")).src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",await new Promise((t,s)=>{e.onload=t,e.onerror=s,document.head.appendChild(e)})),!window.jspdf||!window.jspdf.jsPDF)throw Error("jsPDF library failed to load");let{jsPDF:t}=window.jspdf,s=new t({orientation:"portrait",unit:"mm",format:"a4",compress:!0,putOnlyUsedFonts:!0}),a=l?l():{},i=a.fontFamily||"Georgia, serif",d=a.fontSize||"12pt",o=a.lineHeight||"1.6",c=a.padding||"2rem",m="1rem"===c?15:"3rem"===c?35:25,p=210-2*m,u=m,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:parseInt(d)||12,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:parseFloat(o)||1.2;if(!e||""===e.trim())return;s.setFontSize(t);let l="helvetica";i.includes("serif")||i.includes("Georgia")?l="times":(i.includes("monospace")||i.includes("Menlo"))&&(l="courier"),s.setFont(l,a?"bold":"normal");let c=s.splitTextToSize(e,p),h=c.length*t*n*.5;u+h>297-m&&f(),r?c.forEach((e,a)=>{let i=s.getTextWidth(e);s.text(e,(210-i)/2,u),u+=t*n*.5}):(s.text(c,m,u),u+=(c.length-1)*(t*n*.5)),u+=t*n*.3},f=()=>{s.addPage(),u=m},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;u+e>297-m&&f()};u=m+20;let j=n.title||"Untitled",y=28*s.splitTextToSize(j,p).length*.7,b=0;n.subTitle&&(b=18*s.splitTextToSize(n.subTitle,p).length*.65);let N="by ".concat(n.author||"Unknown Author"),w=y+b+16*s.splitTextToSize(N,p).length*.6+60;w<297-2*m&&(u=(297-w)/2),g(j,28,!0,!0,1.4),u+=30,n.subTitle&&(g(n.subTitle,18,!1,!0,1.3),u+=25),g(N,16,!1,!0,1.2),f(),u=m+20;let F=parseInt(d)||12;g("Copyright \xa9 ".concat(new Date().getFullYear()," by ").concat(n.author||"N/A"),F,!1,!1,parseFloat(o)||1.2),u+=6,g("All Rights Reserved.",F,!1,!1,parseFloat(o)||1.2),u+=6,g("ISBN: ".concat(n.ISBN||"N/A"),F,!1,!1,parseFloat(o)||1.2),u+=6,g("Cover Design By ".concat(n.coverdesignby||"N/A"),F,!1,!1,parseFloat(o)||1.2),u+=6,g("Cover Illustration By ".concat(n.coverillustrationby||"N/A"),F,!1,!1,parseFloat(o)||1.2),u+=6,g("Edited By ".concat(n.editedby||"N/A"),F,!1,!1,parseFloat(o)||1.2),u+=6,g("".concat(n.edition||"N/A"," Edition"),F,!1,!1,parseFloat(o)||1.2),u+=6,g("Published By: ".concat(n.publisher||"N/A"),F,!1,!1,parseFloat(o)||1.2),u+=20,n.description&&(g(n.description,F,!1,!1,parseFloat(o)||1.2),u+=20),u+=50,f(),g("Table of Contents",22,!0,!0,1.3),u+=20,h().forEach(e=>{v(20),s.setFontSize(parseInt(d)||12);let t="helvetica";i.includes("serif")||i.includes("Georgia")?t="times":(i.includes("monospace")||i.includes("Menlo"))&&(t="courier"),s.setFont(t,"normal");let a=e.title,r="Page ".concat(e.page),n=p-s.getTextWidth(r)-10,l=Math.floor((n-s.getTextWidth(a))/3),o=".".repeat(Math.max(0,l)),c="".concat(a," ").concat(o," ").concat(r);s.text(c,m,u),u+=6}),console.log("Processing manuscript data:",r.data.length,"chapters"),r.data.forEach((e,t)=>{console.log("Processing chapter ".concat(t+1,": ").concat(e.sectionTitle)),f(),g(e.sectionTitle,20,!0,!0,1.3),u+=20,x(e.content).split(/\n\s*\n/).filter(e=>e.trim()).forEach(e=>{v(20),e.trim()&&(e.startsWith("\n")&&e.length<100&&!e.includes(".")?(g(e.trim(),F+2,!0,!1,parseFloat(o)||1.4),u+=10):(g(e.trim(),F-1,!1,!1,parseFloat(o)||1.6),u+=8))})});let S=(n.title||"manuscript").replace(/[^a-zA-Z0-9\s]/g,"_").replace(/\s+/g,"_"),k="".concat(S,".pdf");console.log("PDF generation completed, saving as:",k),s.save(k)},v=async()=>{let e=h(),t=l?l():{},s=t.fontFamily||"Georgia, serif",a=t.fontSize||"12pt",i=t.lineHeight||"1.6",d=t.padding||"2rem",o=new Blob(['<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>'.concat(n.title,"</title>\n  <style>\n    body {\n      font-family: ").concat(s,";\n      font-size: ").concat(a,";\n      line-height: ").concat(i,";\n      margin: 0;\n      padding: ").concat(d,';\n      color: black;\n      background: white;\n    }\n    .title-page {\n      text-align: center;\n      page-break-after: always;\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n    .title { \n      font-size: 2.5em; \n      font-weight: bold; \n      margin-bottom: 2rem; \n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      hyphens: auto;\n    }\n    .genre { \n      font-size: 1.5em; \n      margin-bottom: 3rem; \n      font-style: italic; \n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      hyphens: auto;\n    }\n    .author { \n      font-size: 1.3em; \n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      hyphens: auto;\n    }\n    .chapter { \n      page-break-before: always; \n    }\n    .chapter-title { \n      font-size: 1.8em; \n      font-weight: bold; \n      margin-bottom: 2rem; \n      text-align: center; \n    }\n  </style>\n</head>\n<body>\n  <div class="title-page">\n    <div class="title">').concat(n.title,'</div>\n    <div class="genre">').concat(n.subTitle,'</div>\n    <div class="author">').concat(n.author,'</div>\n  </div>\n  \n  <div style="text-align: left; padding: 40px 20px; word-wrap: break-word; overflow-wrap: break-word;">\n    <div>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Copyright \xa9 ').concat(new Date().getFullYear()," by ").concat(n.author||"N/A",'</p>\n      <p>All Rights Reserved.</p>\n    </div>\n    \n    <div style="margin-top: 8px;">\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">ISBN: ').concat(n.ISBN||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Cover Design By ').concat(n.coverdesignby||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Cover Illustration By ').concat(n.coverillustrationby||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Edited By ').concat(n.editedby||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">').concat(n.edition||"N/A",' Edition</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Published By: ').concat(n.publisher||"N/A","</p>\n    </div>\n    ").concat(n.description?'<div style="margin-top: 1.75rem; word-wrap: break-word; overflow-wrap: break-word;">'.concat(n.description,"</div>"):"",'\n  </div>\n  \n  <div style="page-break-after: always; padding: 20px;">\n    <h1 style="text-align: center; font-size: 1.875rem; font-weight: bold; margin-bottom: 2rem;">Table of Contents</h1>\n    <div style="display: flex; flex-direction: column; gap: 1rem;">\n      ').concat(e.map(e=>'\n        <div style="font-size: 1.125rem; margin-bottom: 1rem;">\n          '.concat(e.title," ................................. Page ").concat(e.page,"\n        </div>\n      ")).join(""),"\n    </div>\n  </div>\n  \n  ").concat(r.data.map(e=>'\n    <div class="chapter">\n      <h1 class="chapter-title">'.concat(e.sectionTitle,"</h1>\n      <div>").concat(x(e.content||""),"</div>\n    </div>\n  ")).join(""),"\n</body>\n</html>")],{type:"text/html"}),c=URL.createObjectURL(o),m=document.createElement("a");m.href=c;let p=(n.title||"manuscript").replace(/[^a-zA-Z0-9\s]/g,"_").replace(/\s+/g,"_");m.download="".concat(p,".epub"),document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c)},j=async()=>{if(!r)return void p.Ay.error("No manuscript data to export");if(!r.data||0===r.data.length)return void p.Ay.error("No content to export");c(!0);try{"PDF"===t?(await u(),p.Ay.success("PDF exported successfully!")):(await v(),p.Ay.success("EPUB exported successfully!"))}catch(e){console.error("Export error:",e),p.Ay.error("Failed to export: ".concat(e.message))}finally{c(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Export Options"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose your export format and options"})]}),(0,a.jsxs)(A.z,{value:t,onValueChange:s,className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.C,{value:"EPUB",id:"EPUB",className:"peer sr-only"}),(0,a.jsxs)(T.J,{htmlFor:"EPUB",className:"cursor-pointer flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary",children:[(0,a.jsx)("div",{className:"mb-4 rounded-md bg-[#eaa8f9] p-2 text-primary",children:(0,a.jsx)(f.A,{className:"h-6 w-6 text-primary"})}),(0,a.jsx)("div",{className:"font-medium",children:"EPUB"}),(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Electronic publication format for e-readers"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.C,{value:"PDF",id:"PDF",className:"peer sr-only"}),(0,a.jsxs)(T.J,{htmlFor:"PDF",className:"cursor-pointer flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary",children:[(0,a.jsx)("div",{className:"mb-4 rounded-md bg-[#eaa8f9] p-2 text-primary",children:(0,a.jsx)(f.A,{className:"h-6 w-6 text-primary"})}),(0,a.jsx)("div",{className:"font-medium",children:"PDF"}),(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Professional PDF format ready for printing"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-md bg-green-50 dark:bg-green-900/20 p-4",children:[(0,a.jsx)("div",{className:"font-medium text-green-700 dark:text-green-300",children:"Validation Results"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Your manuscript is ready for export"})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"All formatting settings applied successfully"})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Table of contents generated with page numbers"})]})]}),(0,a.jsx)("div",{className:"flex justify-start items-center",children:(0,a.jsxs)(m.$,{onClick:j,disabled:d||!r,children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export as ".concat(t.toUpperCase())]})})]})]})}var _=s(53397),J=s(78069);function L(e){let{metadata:t,setMetadata:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Book Metadata"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter information about your book"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(_.p,{id:"title",value:t.title,onChange:e=>s({...t,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"subTitle",children:"Sub Title (optional)"}),(0,a.jsx)(_.p,{id:"subTitle",value:t.subTitle,onChange:e=>s({...t,subTitle:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"author",children:"Author"}),(0,a.jsx)(_.p,{id:"author",value:t.author,onChange:e=>s({...t,author:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"publisher",children:"Publisher (optional)"}),(0,a.jsx)(_.p,{id:"publisher",value:t.publisher,onChange:e=>s({...t,publisher:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"ISBN",children:"ISBN (optional)"}),(0,a.jsx)(_.p,{id:"ISBN",value:t.ISBN,onChange:e=>s({...t,ISBN:e.target.value}),placeholder:"e.g. 978-3-16-148410-0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"genre",children:"Genre"}),(0,a.jsx)(_.p,{id:"genre",value:t.genre,onChange:e=>s({...t,genre:e.target.value}),placeholder:"e.g. Fiction, Science, Biography"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"coverdesignby",children:"Cover Design By"}),(0,a.jsx)(_.p,{id:"coverdesignby",value:t.coverdesignby,onChange:e=>s({...t,coverdesignby:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"coverillustrationby",children:"Cover Illustration By"}),(0,a.jsx)(_.p,{id:"coverillustrationby",value:t.coverillustrationby,onChange:e=>s({...t,coverillustrationby:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"editedby",children:"Edited By"}),(0,a.jsx)(_.p,{id:"editedby",value:t.editedby,onChange:e=>s({...t,editedby:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"edition",children:"Edition"}),(0,a.jsx)(_.p,{id:"edition",value:t.edition,onChange:e=>s({...t,edition:e.target.value}),placeholder:"e.g. First Edition, 2nd Revised"})]}),(0,a.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,a.jsx)(T.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(J.T,{id:"description",rows:4,value:t.description,onChange:e=>s({...t,description:e.target.value})})]})]})]})}var R=s(94723);function U(){var e,t;let{user:s,token:r}=(0,x.A)(),[n,l]=(0,i.useState)("theme"),[d,g]=(0,i.useState)(!1),[f,v]=(0,i.useState)(null),[j,y]=(0,i.useState)("fiction"),[b,N]=(0,i.useState)({fontFamily:"serif",fontSize:"medium",lineSpacing:"1.5",margins:"normal",manuscriptSize:"trade"}),[w,F]=(0,i.useState)({title:"",subTitle:"",author:"",publisher:"",description:"",ISBN:"",genre:""}),[C,A]=(0,i.useState)("EPUB"),T=S.findIndex(e=>e.id===n),E=null==(e=S[T+1])?void 0:e.id,P=null==(t=S[T-1])?void 0:t.id;(0,i.useEffect)(()=>{(async()=>{if((null==s?void 0:s.selectedManuscript)&&r){g(!0);try{let e=await (0,R.hd)(s,r);e?(v(e),F(e.manuscript)):p.Ay.error("Failed to load manuscript data")}catch(e){p.Ay.error(e.message)}finally{g(!1)}}})()},[null==s?void 0:s.selectedManuscript,r]);let z=async()=>{"metadata"===n?await (0,R.Gy)(s,r,w)&&l(E):l(E)},I=()=>{let e=k[j];return{fontFamily:({serif:"ui-serif, Georgia, serif","sans-serif":"ui-sans-serif, system-ui, sans-serif",monospace:"ui-monospace, Menlo, monospace"})[b.fontFamily]||e.fontFamily,fontSize:({small:"10pt",medium:"12pt",large:"14pt"})[b.fontSize]||e.fontSize,lineHeight:({single:"1.2",1.5:"1.5",double:"2.0"})[b.lineSpacing]||e.lineHeight,padding:({narrow:"1rem",normal:"2rem",wide:"3rem"})[b.margins]||e.margins,firstLetterStyle:e.firstLetterStyle}};return d?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(u.A,{}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading manuscript data..."})]})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"hidden md:block",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Formatting Wizard"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure how your manuscript will look when exported"})]}),(0,a.jsx)("div",{className:"hidden sm:flex",children:S.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full border-2  ".concat(n===e.id||t<T?"border-primary bg-primary text-white":"border-muted-foreground/25 bg-background text-muted-foreground"),children:t<T?(0,a.jsx)(o.A,{className:"h-5 w-5"}):(0,a.jsx)(e.icon,{className:"h-5 w-5"})}),t<S.length-1&&(0,a.jsx)("div",{className:"h-0.5 w-10 ".concat(t<T?"bg-primary":"bg-muted-foreground/25")})]},e.id))}),(0,a.jsxs)("div",{className:"block sm:hidden",children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:["Step ",T+1," of ",S.length]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:S[T].name})]})]}),(0,a.jsx)(h.w,{}),(0,a.jsxs)("div",{children:["theme"===n&&(0,a.jsx)(B,{selectedTheme:j,setSelectedTheme:y,customSettings:b,setCustomSettings:N,metadata:w,manuscriptData:f,getPreviewStyles:I}),"metadata"===n&&(0,a.jsx)(L,{metadata:w,setMetadata:F}),"preview"===n&&(0,a.jsx)(D,{metadata:w,manuscriptData:f,getPreviewStyles:I,selectedTheme:j,exportFormat:C}),"export"===n&&(0,a.jsx)(M,{exportFormat:C,setExportFormat:A,manuscriptData:f,metadata:w,getPreviewStyles:I})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,a.jsx)(m.$,{variant:"outline",onClick:()=>l(P),disabled:!P,className:"border-[#eaa8f9] text-primary cursor-pointer",children:"Back"}),(0,a.jsxs)(m.$,{onClick:z,disabled:!E,className:"bg-primary",children:["export"===E?"Review & Export":"Continue",(0,a.jsx)(c.A,{className:"ml-2 h-4 w-4"})]})]})]})}function H(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex-1 space-y-4 p-4 md:p-6 pt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"mb-1 text-3xl font-bold text-primary",children:"Formatting Wizard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Prepare your manuscript for export with professional formatting"})]})}),(0,a.jsx)(d.Zp,{children:(0,a.jsx)(d.Wu,{className:"p-6",children:(0,a.jsx)(U,{})})})]})})})}function W(){let{isExpanded:e}=(0,l.c)();return(0,a.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,a.jsx)(r.e,{}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 w-0 ".concat(e?"md:ml-64":"md:ml-20"),style:{paddingTop:64},children:[(0,a.jsx)(n.V,{}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:(0,a.jsx)(H,{})})]})]})}function G(){return(0,a.jsx)(l.G,{children:(0,a.jsx)(W,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[134,644,121,323,669,396,636,593,792],()=>t(4970)),_N_E=e.O()}]);