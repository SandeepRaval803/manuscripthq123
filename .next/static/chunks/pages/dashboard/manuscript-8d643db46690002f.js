(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{14277:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=s(37876),r=s(14232),i=s(89983),n=s(57391),l=s(53397),c=s(35627),d=s(83707),o=s(97685),u=s(12099);let h={part:"Add New Part",chapter:"Add New Chapter",scene:"Add New Scene"};function p(e){let{isOpen:t,onClose:s,onSubmit:p,parentOptions:m=[],initialType:x="chapter",refresh:j,setRefresh:f,selectedParentId:v}=e,{token:g,user:y}=(0,u.A)(),[b,N]=(0,r.useState)({title:"",type:x,parent:v||""}),[w,C]=(0,r.useState)(!1),[A,k]=(0,r.useState)([]),[S,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(null==y?void 0:y.selectedManuscript)&&g&&(async()=>{D(!0);try{let e=await fetch("https://apis.manuscripthq.com/api/section/get?manuscriptId=".concat(null==y?void 0:y.selectedManuscript._id),{method:"GET",headers:{"Content-Type":"application/json","auth-token":g}}),t=await e.json();"success"===t.status?k(t.data):o.Ay.error(t.message||"Failed to load parts.")}catch(e){o.Ay.error("Failed to load parts."),console.error("Error fetching parts:",e)}finally{D(!1)}})()},[t,b.type,g,y]),(0,r.useEffect)(()=>{if(t){let e=v?"chapter":"part";N(t=>({...t,title:"",type:e,parent:v||""}))}},[t,v]);let _=async e=>{e.preventDefault(),C(!0);try{let e={...b,parent:"part"===b.type?null:b.parent,manuscriptId:y.selectedManuscript._id},t=await fetch("https://apis.manuscripthq.com/api/section/create",{method:"POST",headers:{"Content-Type":"application/json","auth-token":g},body:JSON.stringify(e)}),a=await t.json();"success"===a.status?(p(a.data),o.Ay.success("Created successfully!"),s(),f(!j)):o.Ay.error(a.message||"An error occurred. Please try again.")}catch(e){o.Ay.error("Failed to create the section. Please try again."),console.error(e)}finally{C(!1)}};return(0,a.jsx)(n.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(n.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(n.c7,{children:[(0,a.jsx)(n.L3,{children:h[b.type]||"Add New Chapter"}),(0,a.jsxs)(n.rr,{children:["Create a new ",b.type," for your manuscript."]})]}),(0,a.jsxs)("form",{onSubmit:_,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.J,{htmlFor:"title",className:"text-right",children:"Title"}),(0,a.jsx)(l.p,{id:"title",name:"title",value:b.title,onChange:e=>{let{name:t,value:s}=e.target;N(e=>({...e,[t]:s}))},className:"col-span-3",placeholder:"Enter title",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.J,{htmlFor:"type",className:"text-right",children:"Type"}),(0,a.jsxs)(d.l6,{value:b.type,onValueChange:e=>N({...b,type:e,parent:""}),children:[(0,a.jsx)(d.bq,{id:"type",className:"col-span-3",children:(0,a.jsx)(d.yv,{placeholder:"Select type"})}),(0,a.jsxs)(d.gC,{children:[(0,a.jsx)(d.eb,{value:"part",children:"Part"}),(0,a.jsx)(d.eb,{value:"chapter",children:"Chapter"}),(0,a.jsx)(d.eb,{value:"scene",children:"Scene"})]})]})]}),"part"!==b.type&&(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.J,{htmlFor:"parent",className:"text-right",children:"Parent"}),(0,a.jsxs)(d.l6,{value:b.parent||void 0,onValueChange:e=>N({...b,parent:e}),disabled:S||0===A.length,children:[(0,a.jsx)(d.bq,{id:"parent",className:"col-span-3",children:(0,a.jsx)(d.yv,{placeholder:S?"Loading...":"Select parent"})}),(0,a.jsx)(d.gC,{children:A.length>0&&A.map(e=>(0,a.jsx)(d.eb,{value:e._id,children:e.title},e._id))})]})]})]}),(0,a.jsxs)(n.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",className:"bg-primary",disabled:w,children:w?"Creating...":"Create"})]})]})]})})}},26072:(e,t,s)=>{"use strict";s.d(t,{$v:()=>m,EO:()=>o,Lt:()=>l,Rx:()=>x,Zr:()=>j,ck:()=>h,r7:()=>p,wd:()=>u});var a=s(37876);s(14232);var r=s(72450),i=s(8488),n=s(89983);function l(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"alert-dialog",...t})}function c(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"alert-dialog-portal",...t})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"alert-dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(r.UC,{"data-slot":"alert-dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function p(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"alert-dialog-title",className:(0,i.cn)("text-lg font-semibold",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(r.VY,{"data-slot":"alert-dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(r.rc,{className:(0,i.cn)((0,n.r)(),t),...s})}function j(e){let{className:t,...s}=e;return(0,a.jsx)(r.ZD,{className:(0,i.cn)((0,n.r)({variant:"outline"}),t),...s})}},43596:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11713).A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},47860:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var a=s(37876),r=s(14232),i=s(46953),n=s(89717),l=s(93327),c=s(89983),d=s(72195),o=s(65104),u=s(22676),h=s(14277),p=s(57391),m=s(53397),x=s(35627),j=s(78069);function f(e){let{isOpen:t,onClose:s,onSubmit:i}=e,[n,l]=(0,r.useState)(""),[d,o]=(0,r.useState)("");return(0,a.jsx)(p.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(p.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Create Snapshot"}),(0,a.jsx)(p.rr,{children:"Save the current state of your manuscript for future reference."})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({name:n,description:d}),l(""),o(""),s()},children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(x.J,{htmlFor:"name",className:"text-right",children:"Name"}),(0,a.jsx)(m.p,{id:"name",value:n,onChange:e=>l(e.target.value),className:"col-span-3",placeholder:"Snapshot name",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(x.J,{htmlFor:"description",className:"text-right",children:"Description"}),(0,a.jsx)(j.T,{id:"description",value:d,onChange:e=>o(e.target.value),className:"col-span-3",placeholder:"Brief description of changes"})]})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(c.$,{type:"submit",className:"bg-primary",children:"Create Snapshot"})]})]})]})})}var v=s(89081),g=s(30822),y=s(96108),b=s(65662),N=s(43596),w=s(11111),C=s(59119);let A=(0,s(11713).A)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var k=s(95952),S=s(22060),D=s(26072);function _(e){let{isOpen:t,onClose:s,onConfirm:r,title:i,description:n,itemName:l}=e;return(0,a.jsx)(D.Lt,{open:t,onOpenChange:s,children:(0,a.jsxs)(D.EO,{children:[(0,a.jsxs)(D.wd,{children:[(0,a.jsx)(D.r7,{children:i}),(0,a.jsx)(D.$v,{children:n})]}),(0,a.jsxs)(D.ck,{children:[(0,a.jsx)(D.Zr,{children:"Cancel"}),(0,a.jsxs)(D.Rx,{onClick:()=>{r(),s()},className:"bg-primary text-white ",children:["Delete ",l]})]})]})})}var E=s(83707),T=s(12099),R=s(97685);function M(e){var t,s;let{isOpen:i,onClose:n,onSubmit:l,chapter:d}=e,{token:o}=(0,T.A)(),[u,h]=(0,r.useState)((null==d?void 0:d.title)||""),[j,f]=(0,r.useState)((null==d?void 0:d.status)||"draft"),[v,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d&&(h(d.title||""),f(d.status||"draft"))},[d]);let y=async e=>{if(e.preventDefault(),!(null==d?void 0:d._id))return void R.Ay.error("Chapter ID is missing");g(!0);try{let e=await fetch("https://apis.manuscripthq.com/api/section/update/".concat(d._id),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":o},body:JSON.stringify({title:u,status:j})}),t=await e.json();"success"===t.status?(l({...d,title:u,status:j,_id:d._id}),R.Ay.success("Updated successfully!"),n()):R.Ay.error(t.message||"Failed to update. Please try again.")}catch(e){console.error("Error updating section:",e),R.Ay.error("Failed to update. Please try again.")}finally{g(!1)}};return d?(0,a.jsx)(p.lG,{open:i,onOpenChange:n,children:(0,a.jsxs)(p.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsxs)(p.L3,{children:["Edit ",(null==(t=d.type)?void 0:t.charAt(0).toUpperCase())+(null==(s=d.type)?void 0:s.slice(1))]}),(0,a.jsxs)(p.rr,{children:["Update the details of this ",d.type,"."]})]}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(x.J,{htmlFor:"title",className:"text-right",children:"Title"}),(0,a.jsx)(m.p,{id:"title",value:u,onChange:e=>h(e.target.value),className:"col-span-3",placeholder:"".concat(d.type," title"),required:!0,disabled:v})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4 w-full",children:[(0,a.jsx)(x.J,{htmlFor:"status",className:"text-right",children:"Status"}),(0,a.jsxs)(E.l6,{value:j,onValueChange:f,disabled:v,children:[(0,a.jsx)(E.bq,{id:"status",className:"col-span-3 w-full",children:(0,a.jsx)(E.yv,{placeholder:"Select status"})}),(0,a.jsxs)(E.gC,{children:[(0,a.jsx)(E.eb,{value:"draft",children:"Draft"}),(0,a.jsx)(E.eb,{value:"editing",children:"Editing"}),(0,a.jsx)(E.eb,{value:"complete",children:"Complete"})]})]})]})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(c.$,{type:"button",variant:"outline",onClick:n,disabled:v,children:"Cancel"}),(0,a.jsx)(c.$,{type:"submit",className:"bg-primary",disabled:v,children:v?"Saving...":"Save Changes"})]})]})]})}):null}var P=s(94723),O=s(23157);let I=(e,t)=>"".concat(e._id,"-").concat(t,"-").concat(e.type),$=(0,r.memo)(e=>{let{node:t,level:s,expandedNodes:i,onToggle:n,onEdit:l,onDelete:c,onAdd:d,statusColors:h}=e,p=t.children&&t.children.length>0,m=i[t._id]||!1,x=(0,r.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),n(t._id)},[t._id,m,n]),j=(0,r.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),l(t)},[t,l]),f=(0,r.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),c(t)},[t,c]),v=(0,r.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),d(t._id)},[t._id,d]),k=e=>e.children&&0!==e.children.length?e.children.reduce((e,t)=>e+k(t),e.wordCount||0):e.wordCount||0;return(0,a.jsxs)("div",{className:"select-none",children:[(0,a.jsxs)("div",{className:"group flex items-center gap-2 rounded-md px-2 py-1.5 mb-1 transition-colors cursor-pointer ".concat(m?"bg-[#eaa8f9]":""),style:{paddingLeft:"".concat(16*s+8,"px")},onClick:x,children:[p?(0,a.jsx)("div",{className:"h-5 w-5 text-primary hover:bg-primary/10 rounded flex items-center justify-center transition-colors",role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&x(e)},children:m?(0,a.jsx)(g.A,{className:"h-4 w-4"}):(0,a.jsx)(y.A,{className:"h-4 w-4"})}):(0,a.jsx)("div",{className:"ml-5",children:"scene"===t.type?(0,a.jsx)(b.A,{className:"h-4 w-4 text-primary"}):(0,a.jsx)(N.A,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("span",{className:"flex-1 truncate font-medium text-slate-900",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("div",{className:"h-7 w-7 text-primary hover:bg-primary/10 rounded flex items-center justify-center transition-colors cursor-pointer",onClick:e=>j(e),role:"button",tabIndex:0,children:(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsxs)(u.rI,{children:[(0,a.jsx)(u.ty,{asChild:!0,children:(0,a.jsx)("div",{className:"h-7 w-7 text-primary hover:bg-primary/10 rounded flex items-center justify-center transition-colors cursor-pointer",role:"button",tabIndex:0,children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(u.SQ,{align:"end",side:"bottom",sideOffset:5,children:["scene"!==t.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u._2,{onClick:v,children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Add ","part"===t.type?"Chapter":"Scene"]}),(0,a.jsx)(u.mB,{})]}),(0,a.jsxs)(u._2,{onClick:j,children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(u._2,{className:"text-destructive focus:text-destructive",onClick:f,children:[(0,a.jsx)(A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(S.E,{variant:"outline",className:"text-xs border-slate-200 bg-white text-primary",children:[k(t)," words"]}),(0,a.jsx)(S.E,{className:"text-xs ".concat(h[t.status]),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]}),p&&m&&(0,a.jsx)("div",{children:t.children.map(e=>(0,a.jsx)($,{node:e,level:s+1,expandedNodes:i,onToggle:n,onEdit:l,onDelete:c,onAdd:d,statusColors:h},I(e,s+1)))})]})});function F(e){let{refresh:t,setRefresh:s,setUserInfo:i}=e,[n,l]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[x,j]=(0,r.useState)({}),[f,g]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[C,A]=(0,r.useState)(null),[S,D]=(0,r.useState)(void 0),{user:E,token:F}=(0,T.A)(),L={draft:"border-amber-200 bg-amber-100 text-amber-700 dark:border-amber-800/30 dark:bg-amber-900/30 dark:text-amber-300",editing:"border-purple-200 bg-purple-100 text-purple-700 dark:border-purple-800/30 dark:bg-purple-900/30 dark:text-purple-300",complete:"border-teal-200 bg-teal-100 text-teal-700 dark:border-teal-800/30 dark:bg-teal-900/30 dark:text-teal-300"};(0,r.useEffect)(()=>{(null==E?void 0:E.selectedManuscript)&&(async()=>{var e;m(!0);let t=await (0,P.XU)(null==E||null==(e=E.selectedManuscript)?void 0:e._id,F);t.success?(l(t.manuscript),u(t.sections),i({title:t.manuscript.title,author:t.manuscript.author,genre:t.manuscript.genre})):u([]),m(!1)})()},[null==E?void 0:E.selectedManuscript,F,i,t]);let V=(0,r.useCallback)(e=>{j(t=>{let s={...t},a=s[e]||!1;return s[e]=!a,s})},[]),q=(0,r.useCallback)(e=>{D(e),g(!0)},[]),z=(0,r.useCallback)(()=>{D(void 0),g(!0)},[]),U=(0,r.useCallback)(e=>{A(e),b(!0)},[]),G=(0,r.useCallback)(e=>{A(e),w(!0)},[]),Z=async e=>{try{let a=await fetch("https://apis.manuscripthq.com/api/section/delete/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json","auth-token":F}}),r=await a.json();"success"===r.status?(R.Ay.success("Deleted successfully"),s(!t)):R.Ay.error(r.message)}catch(e){console.error("Error deleting section:",e)}};return p?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-center space-y-4",children:(0,a.jsx)(O.A,{})})})}):(0,a.jsxs)("div",{className:"space-y-1",children:[0===d.length?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(v.Zp,{className:"border-0 shadow-lg bg-gradient-to-br from-slate-50 to-white",children:(0,a.jsxs)(v.Wu,{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"relative mb-8",children:(0,a.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-primary/10 to-[#9B1C8C]/10 rounded-3xl flex items-center justify-center mx-auto",children:(0,a.jsx)(k.A,{className:"w-12 h-12 text-primary"})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Start Your Manuscript"}),(0,a.jsx)("p",{className:"text-slate-600 text-lg max-w-lg mx-auto",children:"Your manuscript is empty. Get started by adding a part, chapter, or scene to build your story structure. [+ Add First Section] Use sections like “Act 1,” “Chapter 1,” or “Opening Scene”"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(c.$,{onClick:()=>z(),className:"bg-primary",children:[(0,a.jsx)(o.A,{className:"mr-2 h-5 w-5"}),"Create First Part"]}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:'Parts help organize your manuscript into major sections like "Act 1", "Part One", etc.'})]})]})]})})}):d.map(e=>(0,a.jsx)($,{node:e,level:0,expandedNodes:x,onToggle:V,onEdit:U,onDelete:G,onAdd:q,statusColors:L},I(e,0))),(0,a.jsxs)(c.$,{variant:"ghost",className:"mt-4 w-full justify-start text-primary hover:bg-primary/10 transition-colors",onClick:()=>z(),children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Add new Part, Chapter, Scenes."]}),(0,a.jsx)(h.A,{isOpen:f,onClose:()=>g(!1),onSubmit:e=>{let t={id:"".concat(e.type,"-").concat(Date.now()),title:e.title,type:e.type,wordCount:0,status:"draft"};if(!e.parentId)return void u(e=>[...e,t]);let s=a=>a.map(a=>a._id===e.parentId?{...a,children:[...a.children||[],t]}:a.children?{...a,children:s(a.children)}:a);u(e=>s(e)),j(t=>({...t,[e.parentId]:!0}))},parentOptions:(()=>{let e=[],t=s=>{("part"===s.type||"chapter"===s.type)&&e.push({id:s._id,title:s.title}),s.children&&s.children.forEach(t)};return d.forEach(t),e})(),selectedParentId:S,refresh:t,setRefresh:s}),C&&(0,a.jsx)(M,{isOpen:y,onClose:()=>b(!1),onSubmit:e=>{let t=s=>s.map(s=>s._id===e._id?{...s,title:e.title,status:e.status}:s.children?{...s,children:t(s.children)}:s);u(e=>t(e))},chapter:C}),C&&(0,a.jsx)(_,{isOpen:N,onClose:()=>w(!1),onConfirm:()=>Z(C._id),title:"Delete ".concat(C.type.charAt(0).toUpperCase()+C.type.slice(1)),description:'Are you sure you want to delete "'.concat(C.title,'"? This action cannot be undone.'),itemName:C.type})]})}function L(e){let{refresh:t,setRefresh:s}=e,[i,n]=(0,r.useState)({title:"",author:"",genre:""});return(0,a.jsx)(d.av,{value:"structure",className:"space-y-4",children:(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{className:"text-primary",children:i.title}),(0,a.jsx)(v.BT,{children:i.title&&i.genre&&i.author?"A ".concat(i.genre," novel by ").concat(i.author):""})]}),(0,a.jsx)(v.Wu,{children:(0,a.jsx)(F,{refresh:t,setRefresh:s,setUserInfo:n})})]})})}function V(){return(0,a.jsx)(d.av,{value:"versions",className:"space-y-4",children:(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{children:"Version History"}),(0,a.jsx)(v.BT,{children:"Previous snapshots of your manuscript"})]}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"First Draft Complete"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"May 5, 2025 at 2:30 PM"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"Restore"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",children:"View"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Midpoint Revision"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"April 28, 2025 at 11:15 AM"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"Restore"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",children:"View"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Initial Outline"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"April 15, 2025 at 9:45 AM"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"Restore"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",children:"View"})]})]})]})})]})})}$.displayName="TreeNode";var q=s(10841),z=s.n(q);function U(){var e,t;let[s,i]=(0,r.useState)(null),{token:n,user:l}=(0,T.A)();return(0,r.useEffect)(()=>{(null==l?void 0:l.selectedManuscript)&&(async()=>{try{let e=await (0,P.vk)(l.selectedManuscript._id,n);i(e)}catch(e){R.oR.error(e.message)}})()},[null==l?void 0:l.selectedManuscript,n]),(0,a.jsx)(d.av,{value:"metadata",className:"space-y-4",children:(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{children:"Manuscript Details"}),(0,a.jsx)(v.BT,{children:"Information about your manuscript"})]}),(0,a.jsx)(v.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Title"}),(0,a.jsx)("div",{children:(null==s?void 0:s.title)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Author"}),(0,a.jsx)("div",{children:(null==s?void 0:s.author)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Genre"}),(0,a.jsx)("div",{children:(null==s?void 0:s.genre)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Target Word Count"}),(0,a.jsx)("div",{children:null!=(e=null==s?void 0:s.targetCount)?e:"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Current Word Count"}),(0,a.jsx)("div",{children:null!=(t=null==s?void 0:s.currentCount)?t:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)("div",{children:(null==s?void 0:s.status)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),(0,a.jsx)("div",{children:(null==s?void 0:s.createdAt)?z()(s.createdAt).format("Do MMMM, YYYY"):"N/A"})]})]})})})]})})}function G(){let[e,t]=(0,r.useState)(!1),[s,i]=(0,r.useState)("chapter"),[n,l]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),x=e=>{i(e),t(!0)},[j,v]=(0,r.useState)(!1);return(0,a.jsx)("div",{className:"flex-1 space-y-4 p-4 md:p-6 pt-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"mb-1 text-3xl font-bold text-primary",children:"Manuscript Manager"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Organize your manuscript structure and track your progress."})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(u.rI,{children:[(0,a.jsx)(u.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{className:"bg-primary",children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"New"]})}),(0,a.jsxs)(u.SQ,{children:[(0,a.jsx)(u._2,{onClick:()=>x("part"),children:"New Part"}),(0,a.jsx)(u._2,{onClick:()=>x("chapter"),children:"New Chapter"}),(0,a.jsx)(u._2,{onClick:()=>x("scene"),children:"New Scene"})]})]})})]}),(0,a.jsxs)(d.tU,{defaultValue:"structure",className:"mt-6",children:[(0,a.jsxs)(d.j7,{className:"bg-[#eaa8f9]",children:[(0,a.jsx)(d.Xi,{value:"structure",className:"data-[state=active]:text-primary cursor-pointer",children:"Structure"}),(0,a.jsx)(d.Xi,{value:"metadata",className:"data-[state=active]:text-primary cursor-pointer",children:"Metadata"})]}),(0,a.jsx)(L,{refresh:j,setRefresh:v}),(0,a.jsx)(V,{}),(0,a.jsx)(U,{})]}),(0,a.jsx)(h.A,{isOpen:e,onClose:()=>t(!1),onSubmit:e=>{t(!1)},parentOptions:[{id:"1",title:"Part I"},{id:"2",title:"Part II"}],initialType:s,refresh:j,setRefresh:v}),(0,a.jsx)(f,{isOpen:n,onClose:()=>l(!1),onSubmit:e=>{l(!1)}})]})})}var Z=s(89099);let B=()=>{let e=(0,Z.useRouter)(),{user:t,loading:s}=(0,T.A)();return(0,r.useEffect)(()=>{s||(null==t?void 0:t.subscription)!=="Premium"&&e.replace("/dashboard/subscription?upgrade=required")},[t,s,e]),{isPremiumUser:(null==t?void 0:t.subscription)==="Premium",isLoading:s,user:t}};var J=s(85515);function Y(){let{isExpanded:e}=(0,l.c)(),{isPremiumUser:t,isLoading:s}=B();return s?(0,a.jsx)(J.Gw,{message:"Checking subscription..."}):t?(0,a.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,a.jsx)(i.e,{}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 w-0 ".concat(e?"md:ml-64":"md:ml-20"),style:{paddingTop:64},children:[(0,a.jsx)(n.V,{}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:(0,a.jsx)(G,{})})]})]}):(0,a.jsx)(J.Gw,{message:"Redirecting to subscription..."})}function H(){return(0,a.jsx)(l.G,{children:(0,a.jsx)(Y,{})})}},53720:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/manuscript",function(){return s(47860)}])},59119:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11713).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},65662:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11713).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},72195:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>c,av:()=>d,j7:()=>l,tU:()=>n});var a=s(37876);s(14232);var r=s(90491),i=s(8488);function n(e){let{className:t,...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...s})}},72450:(e,t,s)=>{"use strict";s.d(t,{UC:()=>M,VY:()=>$,ZD:()=>O,ZL:()=>T,bL:()=>E,hE:()=>I,hJ:()=>R,rc:()=>P});var a=s(14232),r=s(91844),i=s(10714),n=s(26303),l=s(33716),c=s(82987),d=s(37876),o="AlertDialog",[u,h]=(0,r.A)(o,[n.Hs]),p=(0,n.Hs)(),m=e=>{let{__scopeAlertDialog:t,...s}=e,a=p(t);return(0,d.jsx)(n.bL,{...a,...s,modal:!0})};m.displayName=o,a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,d.jsx)(n.l9,{...r,...a,ref:t})}).displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:t,...s}=e,a=p(t);return(0,d.jsx)(n.ZL,{...a,...s})};x.displayName="AlertDialogPortal";var j=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,d.jsx)(n.hJ,{...r,...a,ref:t})});j.displayName="AlertDialogOverlay";var f="AlertDialogContent",[v,g]=u(f),y=(0,c.Dc)("AlertDialogContent"),b=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,children:r,...c}=e,o=p(s),u=a.useRef(null),h=(0,i.s)(t,u),m=a.useRef(null);return(0,d.jsx)(n.G$,{contentName:f,titleName:N,docsSlug:"alert-dialog",children:(0,d.jsx)(v,{scope:s,cancelRef:m,children:(0,d.jsxs)(n.UC,{role:"alertdialog",...o,...c,ref:h,onOpenAutoFocus:(0,l.m)(c.onOpenAutoFocus,e=>{e.preventDefault(),m.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,d.jsx)(y,{children:r}),(0,d.jsx)(_,{contentRef:u})]})})})});b.displayName=f;var N="AlertDialogTitle",w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,d.jsx)(n.hE,{...r,...a,ref:t})});w.displayName=N;var C="AlertDialogDescription",A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,d.jsx)(n.VY,{...r,...a,ref:t})});A.displayName=C;var k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...a}=e,r=p(s);return(0,d.jsx)(n.bm,{...r,...a,ref:t})});k.displayName="AlertDialogAction";var S="AlertDialogCancel",D=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...a}=e,{cancelRef:r}=g(S,s),l=p(s),c=(0,i.s)(t,r);return(0,d.jsx)(n.bm,{...l,...a,ref:c})});D.displayName=S;var _=({contentRef:e})=>{let t=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${C}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},E=m,T=x,R=j,M=b,P=k,O=D,I=w,$=A},78069:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(37876),r=s(14232),i=s(8488);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});n.displayName="Textarea"},90491:(e,t,s)=>{"use strict";s.d(t,{B8:()=>_,UC:()=>T,bL:()=>D,l9:()=>E});var a=s(14232),r=s(33716),i=s(91844),n=s(64455),l=s(96822),c=s(66326),d=s(14966),o=s(58162),u=s(70294),h=s(37876),p="Tabs",[m,x]=(0,i.A)(p,[n.RG]),j=(0,n.RG)(),[f,v]=m(p),g=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:r,defaultValue:i,orientation:n="horizontal",dir:l,activationMode:m="automatic",...x}=e,j=(0,d.jH)(l),[v,g]=(0,o.i)({prop:a,onChange:r,defaultProp:i??"",caller:p});return(0,h.jsx)(f,{scope:s,baseId:(0,u.B)(),value:v,onValueChange:g,orientation:n,dir:j,activationMode:m,children:(0,h.jsx)(c.sG.div,{dir:j,"data-orientation":n,...x,ref:t})})});g.displayName=p;var y="TabsList",b=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...r}=e,i=v(y,s),l=j(s);return(0,h.jsx)(n.bL,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,h.jsx)(c.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});b.displayName=y;var N="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:i=!1,...l}=e,d=v(N,s),o=j(s),u=k(d.baseId,a),p=S(d.baseId,a),m=a===d.value;return(0,h.jsx)(n.q7,{asChild:!0,...o,focusable:!i,active:m,children:(0,h.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":p,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...l,ref:t,onMouseDown:(0,r.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(a)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(a)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==d.activationMode;m||i||!e||d.onValueChange(a)})})})});w.displayName=N;var C="TabsContent",A=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:i,children:n,...d}=e,o=v(C,s),u=k(o.baseId,r),p=S(o.baseId,r),m=r===o.value,x=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(l.C,{present:i||m,children:({present:s})=>(0,h.jsx)(c.sG.div,{"data-state":m?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:p,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&n})})});function k(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}A.displayName=C;var D=g,_=b,E=w,T=A},96108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11713).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[716,134,644,121,323,669,636,593,792],()=>t(53720)),_N_E=e.O()}]);