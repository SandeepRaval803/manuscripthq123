(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{9778:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/childrens-book-wizard",function(){return a(67488)}])},67488:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var s=a(37876),r=a(14232),i=a(46953),n=a(89717),l=a(93327),o=a(89081),d=a(33276),c=a(96108),m=a(89983),p=a(18632),h=a(12099),x=a(97685),u=a(23157),g=a(69847),f=a(65390),v=a(78572),y=a(71449),j=a(95952),b=a(26913),w=a(1e3),N=a(24105),k=a(69628);let F=[{id:"theme",name:"Theme",icon:g.A},{id:"metadata",name:"Metadata",icon:f.A},{id:"preview",name:"Preview",icon:v.A},{id:"export",name:"Export",icon:y.A}],S={fiction:{fontFamily:"ui-serif, Georgia, serif",fontSize:"12pt",lineHeight:"1.6",margins:"2rem",firstLetterStyle:!0},"non-fiction":{fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSize:"11pt",lineHeight:"1.5",margins:"1.5rem",firstLetterStyle:!1},children:{fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSize:"14pt",lineHeight:"1.8",margins:"2.5rem",firstLetterStyle:!1},textbooks:{fontFamily:"ui-sans-serif, system-ui, sans-serif",fontSize:"10pt",lineHeight:"1.4",margins:"1rem",firstLetterStyle:!1},memoir:{fontFamily:"ui-serif, Georgia, serif",fontSize:"12pt",lineHeight:"1.7",margins:"2rem",firstLetterStyle:!0}};j.A,b.A,w.A,N.A,k.A;var A=a(22963);function C(e){let{metadata:t,manuscriptData:a,getPreviewStyles:i,pageImages:n,setPageImages:l,readOnly:o=!1}=e,[d,p]=(0,r.useState)(0),h=(e,t)=>{if(!e||!e.type.startsWith("image/"))return;let a=new FileReader;a.onload=()=>{l(e=>{let s=[...e];return s[t]=a.result,s})},a.readAsDataURL(e)},x=(e,t)=>{e.preventDefault(),h(e.dataTransfer.files[0],t)},u=e=>{e.preventDefault()},g=i();(null==a?void 0:a.data)&&a.data.map((e,t)=>({title:e.sectionTitle,page:t+4}));let f=(o?n.map((e,t)=>({img:e,index:t})).filter(e=>e.img):Array.from({length:32},(e,t)=>({img:n[t]||null,index:t}))).map(e=>{let{img:t,index:a}=e;return{content:(0,s.jsx)("div",{className:"h-full flex flex-col gap-4",children:(0,s.jsxs)("div",{className:"rounded-md overflow-hidden flex items-center justify-center text-sm\n            ".concat(o?"h-[420px]":"h-72 bg-gray-200 cursor-pointer","\n          "),onDrop:o?void 0:e=>x(e,a),onDragOver:o?void 0:u,onClick:o?void 0:()=>{var e;return null==(e=document.getElementById("img-upload-".concat(a)))?void 0:e.click()},children:[t?(0,s.jsx)("img",{src:t,alt:"Page artwork",className:"w-full h-full object-cover"}):!o&&"Drop image here or click to upload",!o&&(0,s.jsx)("input",{id:"img-upload-".concat(a),type:"file",accept:"image/*",className:"hidden",onChange:e=>h(e.target.files[0],a)})]})})}}),v=f[d],y=f.length;return(o&&d>=y&&y>0&&p(0),0===y&&o)?(0,s.jsx)("div",{className:"text-sm text-gray-500 italic text-center",children:"No images uploaded yet."}):(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white shadow-lg border rounded-lg p-8 mb-8 min-h-[380px] relative",style:g,children:[null==v?void 0:v.content,(0,s.jsxs)("div",{className:"absolute bottom-4 right-4 text-sm text-gray-500",children:["Page ",d+1," of ",y]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)(m.$,{variant:"outline",onClick:()=>p(Math.max(0,d-1)),disabled:0===d,className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),"Previous"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[d+1," / ",y]}),(0,s.jsxs)(m.$,{variant:"outline",onClick:()=>p(Math.min(y-1,d+1)),disabled:d===y-1,className:"flex items-center gap-2",children:["Next",(0,s.jsx)(c.A,{className:"h-4 w-4"})]})]})]})}function T(e){let{metadata:t,manuscriptData:a,getPreviewStyles:r,pageImages:i,setPageImages:n}=e,l=i.filter(Boolean);return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Preview"})}),(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsx)(C,{metadata:t,manuscriptData:a,getPreviewStyles:r,pageImages:i,setPageImages:n,readOnly:!1})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Cover Designs"})}),(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:0===l.length?(0,s.jsx)("div",{className:"text-sm text-gray-500 italic",children:"No images uploaded yet"}):l.map((e,t)=>(0,s.jsx)("img",{src:e,alt:"Cover design ".concat(t+1),className:"w-full h-auto rounded-md object-cover"},t))})})]})]})})}function E(e){let{metadata:t,manuscriptData:a,getPreviewStyles:r,selectedTheme:i,exportFormat:n,pageImages:l}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Preview Your Book"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Navigate through your book pages to see how it will look when exported"})]}),(0,s.jsx)(C,{metadata:t,manuscriptData:a,getPreviewStyles:r,pageImages:l,readOnly:!0}),a&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Manuscript Statistics"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Sections:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:a.count})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Theme:"}),(0,s.jsx)("span",{className:"ml-2 font-medium capitalize",children:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Format:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:n.toUpperCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Total Pages:"}),(0,s.jsx)("span",{className:"ml-2 font-medium",children:a.count+2})]})]})]})]})}var P=a(29812),B=a(61613),D=a(35627);function z(e){let{exportFormat:t,setExportFormat:a,manuscriptData:i,metadata:n,getPreviewStyles:l}=e,[o,c]=(0,r.useState)(!1),p=()=>(null==i?void 0:i.data)?i.data.map((e,t)=>({title:e.sectionTitle,page:t+4})):[],h=e=>{if(!e)return"";let t=document.createElement("div");t.innerHTML=e;let a=e=>{let t="";for(let s of e.childNodes)if(s.nodeType===Node.TEXT_NODE)t+=s.textContent;else if(s.nodeType===Node.ELEMENT_NODE){let e=s.tagName.toLowerCase();if("p"===e||"div"===e){let e=a(s);e.trim()&&(t+=e.trim()+"\n\n")}else if("h1"===e||"h2"===e||"h3"===e||"h4"===e||"h5"===e||"h6"===e){let e=a(s);e.trim()&&(t+="\n"+e.trim()+"\n\n")}else if("br"===e)t+="\n";else if("li"===e){let e=a(s);e.trim()&&(t+="â€¢ "+e.trim()+"\n")}else if("strong"===e||"b"===e){let e=a(s);e.trim()&&(t+=e.trim())}else if("em"===e||"i"===e){let e=a(s);e.trim()&&(t+=e.trim())}else{let e=a(s);e.trim()&&(t+=e.trim())}}return t},s=a(t);return s.replace(/\n\s*\n\s*\n/g,"\n\n").replace(/[ \t]+/g," ").trim()},u=async()=>{try{console.log("Starting PDF export..."),await g()}catch(e){throw console.error("PDF generation error details:",e),console.error("Error stack:",e.stack),Error("Failed to generate PDF: ".concat(e.message))}},g=async()=>{let e=document.querySelector('script[src*="jspdf"]');if(e||((e=document.createElement("script")).src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",await new Promise((t,a)=>{e.onload=t,e.onerror=a,document.head.appendChild(e)})),!window.jspdf||!window.jspdf.jsPDF)throw Error("jsPDF library failed to load");let{jsPDF:t}=window.jspdf,a=new t({orientation:"portrait",unit:"mm",format:"a4",compress:!0,putOnlyUsedFonts:!0}),s=l?l():{},r=s.fontFamily||"Georgia, serif",o=s.fontSize||"12pt",d=s.lineHeight||"1.6",c=s.padding||"2rem",m="1rem"===c?15:"3rem"===c?35:25,x=210-2*m,u=m,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:parseInt(o)||12,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:parseFloat(d)||1.2;if(!e||""===e.trim())return;a.setFontSize(t);let l="helvetica";r.includes("serif")||r.includes("Georgia")?l="times":(r.includes("monospace")||r.includes("Menlo"))&&(l="courier"),a.setFont(l,s?"bold":"normal");let c=a.splitTextToSize(e,x),p=c.length*t*n*.5;u+p>297-m&&f(),i?c.forEach((e,s)=>{let r=a.getTextWidth(e);a.text(e,(210-r)/2,u),u+=t*n*.5}):(a.text(c,m,u),u+=(c.length-1)*(t*n*.5)),u+=t*n*.3},f=()=>{a.addPage(),u=m},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;u+e>297-m&&f()};u=m+20;let y=n.title||"Untitled",j=28*a.splitTextToSize(y,x).length*.7,b=0;n.subTitle&&(b=18*a.splitTextToSize(n.subTitle,x).length*.65);let w="by ".concat(n.author||"Unknown Author"),N=j+b+16*a.splitTextToSize(w,x).length*.6+60;N<297-2*m&&(u=(297-N)/2),g(y,28,!0,!0,1.4),u+=30,n.subTitle&&(g(n.subTitle,18,!1,!0,1.3),u+=25),g(w,16,!1,!0,1.2),f(),u=m+20;let k=parseInt(o)||12;g("Copyright \xa9 ".concat(new Date().getFullYear()," by ").concat(n.author||"N/A"),k,!1,!1,parseFloat(d)||1.2),u+=6,g("All Rights Reserved.",k,!1,!1,parseFloat(d)||1.2),u+=6,g("ISBN: ".concat(n.ISBN||"N/A"),k,!1,!1,parseFloat(d)||1.2),u+=6,g("Cover Design By ".concat(n.coverdesignby||"N/A"),k,!1,!1,parseFloat(d)||1.2),u+=6,g("Cover Illustration By ".concat(n.coverillustrationby||"N/A"),k,!1,!1,parseFloat(d)||1.2),u+=6,g("Edited By ".concat(n.editedby||"N/A"),k,!1,!1,parseFloat(d)||1.2),u+=6,g("".concat(n.edition||"N/A"," Edition"),k,!1,!1,parseFloat(d)||1.2),u+=6,g("Published By: ".concat(n.publisher||"N/A"),k,!1,!1,parseFloat(d)||1.2),u+=20,n.description&&(g(n.description,k,!1,!1,parseFloat(d)||1.2),u+=20),u+=50,f(),g("Table of Contents",22,!0,!0,1.3),u+=20,p().forEach(e=>{v(20),a.setFontSize(parseInt(o)||12);let t="helvetica";r.includes("serif")||r.includes("Georgia")?t="times":(r.includes("monospace")||r.includes("Menlo"))&&(t="courier"),a.setFont(t,"normal");let s=e.title,i="Page ".concat(e.page),n=x-a.getTextWidth(i)-10,l=Math.floor((n-a.getTextWidth(s))/3),d=".".repeat(Math.max(0,l)),c="".concat(s," ").concat(d," ").concat(i);a.text(c,m,u),u+=6}),console.log("Processing manuscript data:",i.data.length,"chapters"),i.data.forEach((e,t)=>{console.log("Processing chapter ".concat(t+1,": ").concat(e.sectionTitle)),f(),g(e.sectionTitle,20,!0,!0,1.3),u+=20,h(e.content).split(/\n\s*\n/).filter(e=>e.trim()).forEach(e=>{v(20),e.trim()&&(e.startsWith("\n")&&e.length<100&&!e.includes(".")?(g(e.trim(),k+2,!0,!1,parseFloat(d)||1.4),u+=10):(g(e.trim(),k-1,!1,!1,parseFloat(d)||1.6),u+=8))})});let F=(n.title||"manuscript").replace(/[^a-zA-Z0-9\s]/g,"_").replace(/\s+/g,"_"),S="".concat(F,".pdf");console.log("PDF generation completed, saving as:",S),a.save(S)},v=async()=>{let e=p(),t=l?l():{},a=t.fontFamily||"Georgia, serif",s=t.fontSize||"12pt",r=t.lineHeight||"1.6",o=t.padding||"2rem",d=new Blob(['<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>'.concat(n.title,"</title>\n  <style>\n    body {\n      font-family: ").concat(a,";\n      font-size: ").concat(s,";\n      line-height: ").concat(r,";\n      margin: 0;\n      padding: ").concat(o,';\n      color: black;\n      background: white;\n    }\n    .title-page {\n      text-align: center;\n      page-break-after: always;\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n    .title { \n      font-size: 2.5em; \n      font-weight: bold; \n      margin-bottom: 2rem; \n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      hyphens: auto;\n    }\n    .genre { \n      font-size: 1.5em; \n      margin-bottom: 3rem; \n      font-style: italic; \n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      hyphens: auto;\n    }\n    .author { \n      font-size: 1.3em; \n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      hyphens: auto;\n    }\n    .chapter { \n      page-break-before: always; \n    }\n    .chapter-title { \n      font-size: 1.8em; \n      font-weight: bold; \n      margin-bottom: 2rem; \n      text-align: center; \n    }\n  </style>\n</head>\n<body>\n  <div class="title-page">\n    <div class="title">').concat(n.title,'</div>\n    <div class="genre">').concat(n.subTitle,'</div>\n    <div class="author">').concat(n.author,'</div>\n  </div>\n  \n  <div style="text-align: left; padding: 40px 20px; word-wrap: break-word; overflow-wrap: break-word;">\n    <div>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Copyright \xa9 ').concat(new Date().getFullYear()," by ").concat(n.author||"N/A",'</p>\n      <p>All Rights Reserved.</p>\n    </div>\n    \n    <div style="margin-top: 8px;">\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">ISBN: ').concat(n.ISBN||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Cover Design By ').concat(n.coverdesignby||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Cover Illustration By ').concat(n.coverillustrationby||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Edited By ').concat(n.editedby||"N/A",'</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">').concat(n.edition||"N/A",' Edition</p>\n      <p style="word-wrap: break-word; overflow-wrap: break-word;">Published By: ').concat(n.publisher||"N/A","</p>\n    </div>\n    ").concat(n.description?'<div style="margin-top: 1.75rem; word-wrap: break-word; overflow-wrap: break-word;">'.concat(n.description,"</div>"):"",'\n  </div>\n  \n  <div style="page-break-after: always; padding: 20px;">\n    <h1 style="text-align: center; font-size: 1.875rem; font-weight: bold; margin-bottom: 2rem;">Table of Contents</h1>\n    <div style="display: flex; flex-direction: column; gap: 1rem;">\n      ').concat(e.map(e=>'\n        <div style="font-size: 1.125rem; margin-bottom: 1rem;">\n          '.concat(e.title," ................................. Page ").concat(e.page,"\n        </div>\n      ")).join(""),"\n    </div>\n  </div>\n  \n  ").concat(i.data.map(e=>'\n    <div class="chapter">\n      <h1 class="chapter-title">'.concat(e.sectionTitle,"</h1>\n      <div>").concat(h(e.content||""),"</div>\n    </div>\n  ")).join(""),"\n</body>\n</html>")],{type:"text/html"}),c=URL.createObjectURL(d),m=document.createElement("a");m.href=c;let x=(n.title||"manuscript").replace(/[^a-zA-Z0-9\s]/g,"_").replace(/\s+/g,"_");m.download="".concat(x,".epub"),document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(c)},y=async()=>{if(!i)return void x.Ay.error("No manuscript data to export");if(!i.data||0===i.data.length)return void x.Ay.error("No content to export");c(!0);try{"PDF"===t?(await u(),x.Ay.success("PDF exported successfully!")):(await v(),x.Ay.success("EPUB exported successfully!"))}catch(e){console.error("Export error:",e),x.Ay.error("Failed to export: ".concat(e.message))}finally{c(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Export Options"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose your export format and options"})]}),(0,s.jsxs)(B.z,{value:t,onValueChange:a,className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(B.C,{value:"EPUB",id:"EPUB",className:"peer sr-only"}),(0,s.jsxs)(D.J,{htmlFor:"EPUB",className:"cursor-pointer flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary",children:[(0,s.jsx)("div",{className:"mb-4 rounded-md bg-[#eaa8f9] p-2 text-primary",children:(0,s.jsx)(f.A,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)("div",{className:"font-medium",children:"EPUB"}),(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Electronic publication format for e-readers"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(B.C,{value:"PDF",id:"PDF",className:"peer sr-only"}),(0,s.jsxs)(D.J,{htmlFor:"PDF",className:"cursor-pointer flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary",children:[(0,s.jsx)("div",{className:"mb-4 rounded-md bg-[#eaa8f9] p-2 text-primary",children:(0,s.jsx)(f.A,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)("div",{className:"font-medium",children:"PDF"}),(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Professional PDF format ready for printing"})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,s.jsxs)("div",{className:"rounded-md bg-green-50 dark:bg-green-900/20 p-4",children:[(0,s.jsx)("div",{className:"font-medium text-green-700 dark:text-green-300",children:"Validation Results"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Your manuscript is ready for export"})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"All formatting settings applied successfully"})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Table of contents generated with page numbers"})]})]}),(0,s.jsx)("div",{className:"flex justify-start items-center",children:(0,s.jsxs)(m.$,{onClick:y,disabled:o||!i,children:[(0,s.jsx)(P.A,{className:"mr-2 h-4 w-4"}),o?"Exporting...":"Export as ".concat(t.toUpperCase())]})})]})]})}var I=a(53397),_=a(78069);function U(e){let{metadata:t,setMetadata:a}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Book Metadata"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter information about your book"})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"title",children:"Title"}),(0,s.jsx)(I.p,{id:"title",value:t.title,onChange:e=>a({...t,title:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"subTitle",children:"Sub Title (optional)"}),(0,s.jsx)(I.p,{id:"subTitle",value:t.subTitle,onChange:e=>a({...t,subTitle:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"author",children:"Author"}),(0,s.jsx)(I.p,{id:"author",value:t.author,onChange:e=>a({...t,author:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"publisher",children:"Publisher (optional)"}),(0,s.jsx)(I.p,{id:"publisher",value:t.publisher,onChange:e=>a({...t,publisher:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"ISBN",children:"ISBN (optional)"}),(0,s.jsx)(I.p,{id:"ISBN",value:t.ISBN,onChange:e=>a({...t,ISBN:e.target.value}),placeholder:"e.g. 978-3-16-148410-0"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"genre",children:"Genre"}),(0,s.jsx)(I.p,{id:"genre",value:t.genre,onChange:e=>a({...t,genre:e.target.value}),placeholder:"e.g. Fiction, Science, Biography"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"coverdesignby",children:"Cover Design By"}),(0,s.jsx)(I.p,{id:"coverdesignby",value:t.coverdesignby,onChange:e=>a({...t,coverdesignby:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"coverillustrationby",children:"Cover Illustration By"}),(0,s.jsx)(I.p,{id:"coverillustrationby",value:t.coverillustrationby,onChange:e=>a({...t,coverillustrationby:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"editedby",children:"Edited By"}),(0,s.jsx)(I.p,{id:"editedby",value:t.editedby,onChange:e=>a({...t,editedby:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(D.J,{htmlFor:"edition",children:"Edition"}),(0,s.jsx)(I.p,{id:"edition",value:t.edition,onChange:e=>a({...t,edition:e.target.value}),placeholder:"e.g. First Edition, 2nd Revised"})]}),(0,s.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,s.jsx)(D.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(_.T,{id:"description",rows:4,value:t.description,onChange:e=>a({...t,description:e.target.value})})]})]})]})}var L=a(94723);function M(){var e,t;let{user:a,token:i}=(0,h.A)(),[n,l]=(0,r.useState)("theme"),[o,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[y,j]=(0,r.useState)(Array(32).fill(null)),[b,w]=(0,r.useState)("fiction"),[N,k]=(0,r.useState)({fontFamily:"serif",fontSize:"medium",lineSpacing:"1.5",margins:"normal",manuscriptSize:"trade"}),[A,C]=(0,r.useState)({title:"",subTitle:"",author:"",publisher:"",description:"",ISBN:"",genre:""}),[P,B]=(0,r.useState)("EPUB"),D=F.findIndex(e=>e.id===n),I=null==(e=F[D+1])?void 0:e.id,_=null==(t=F[D-1])?void 0:t.id;(0,r.useEffect)(()=>{(async()=>{if((null==a?void 0:a.selectedManuscript)&&i){g(!0);try{let e=await (0,L.hd)(a,i);e?(v(e),C(e.manuscript)):x.Ay.error("Failed to load manuscript data")}catch(e){x.Ay.error(e.message)}finally{g(!1)}}})()},[null==a?void 0:a.selectedManuscript,i]);let M=async()=>{"metadata"===n?await (0,L.Gy)(a,i,A)&&l(I):l(I)},R=()=>{let e=S[b];return{fontFamily:({serif:"ui-serif, Georgia, serif","sans-serif":"ui-sans-serif, system-ui, sans-serif",monospace:"ui-monospace, Menlo, monospace"})[N.fontFamily]||e.fontFamily,fontSize:({small:"10pt",medium:"12pt",large:"14pt"})[N.fontSize]||e.fontSize,lineHeight:({single:"1.2",1.5:"1.5",double:"2.0"})[N.lineSpacing]||e.lineHeight,padding:({narrow:"1rem",normal:"2rem",wide:"3rem"})[N.margins]||e.margins,firstLetterStyle:e.firstLetterStyle}};return o?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(u.A,{}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading manuscript data..."})]})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"hidden md:block",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Children's Book Wizard"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create a children's book"})]}),(0,s.jsx)("div",{className:"hidden sm:flex",children:F.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full border-2  ".concat(n===e.id||t<D?"border-primary bg-primary text-white":"border-muted-foreground/25 bg-background text-muted-foreground"),children:t<D?(0,s.jsx)(d.A,{className:"h-5 w-5"}):(0,s.jsx)(e.icon,{className:"h-5 w-5"})}),t<F.length-1&&(0,s.jsx)("div",{className:"h-0.5 w-10 ".concat(t<D?"bg-primary":"bg-muted-foreground/25")})]},e.id))}),(0,s.jsxs)("div",{className:"block sm:hidden",children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:["Step ",D+1," of ",F.length]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:F[D].name})]})]}),(0,s.jsx)(p.w,{}),(0,s.jsxs)("div",{children:["theme"===n&&(0,s.jsx)(T,{selectedTheme:b,setSelectedTheme:w,customSettings:N,setCustomSettings:k,metadata:A,manuscriptData:f,getPreviewStyles:R,pageImages:y,setPageImages:j}),"metadata"===n&&(0,s.jsx)(U,{metadata:A,setMetadata:C}),"preview"===n&&(0,s.jsx)(E,{metadata:A,manuscriptData:f,getPreviewStyles:R,selectedTheme:b,exportFormat:P,pageImages:y}),"export"===n&&(0,s.jsx)(z,{exportFormat:P,setExportFormat:B,manuscriptData:f,metadata:A,getPreviewStyles:R})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,s.jsx)(m.$,{variant:"outline",onClick:()=>l(_),disabled:!_,className:"border-[#eaa8f9] text-primary cursor-pointer",children:"Back"}),(0,s.jsxs)(m.$,{onClick:M,disabled:!I,className:"bg-primary",children:["export"===I?"Review & Export":"Continue",(0,s.jsx)(c.A,{className:"ml-2 h-4 w-4"})]})]})]})}function R(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex-1 space-y-4 p-4 md:p-6 pt-6",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"mb-1 text-3xl font-bold text-primary",children:"Children's Book Wizard"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Create a children's book"})]})}),(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"p-6",children:(0,s.jsx)(M,{})})})]})})})}function J(){let{isExpanded:e}=(0,l.c)();return(0,s.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,s.jsx)(i.e,{}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 w-0 ".concat(e?"md:ml-64":"md:ml-20"),style:{paddingTop:64},children:[(0,s.jsx)(n.V,{}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:(0,s.jsx)(R,{})})]})]})}function O(){return(0,s.jsx)(l.G,{children:(0,s.jsx)(J,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[134,644,121,323,669,396,636,593,792],()=>t(9778)),_N_E=e.O()}]);