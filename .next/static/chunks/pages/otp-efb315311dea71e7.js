(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{7962:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/otp",function(){return s(42016)}])},42016:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(37876),a=s(54587),l=s.n(a),c=s(48230),n=s.n(c),i=s(14232),o=s(89099),d=s(97685),u=s(89983),m=s(53397),f=s(35627),h=s(89081),x=s(94723);function p(){let e=(0,o.useRouter)();(0,i.useEffect)(()=>{localStorage.getItem("otpData")||e.replace("/forgot-password")},[e]);let[t,s]=(0,i.useState)(["","","",""]),[a,l]=(0,i.useState)(45),[c,n]=(0,i.useState)(!1),p=(0,i.useRef)([]),g=localStorage.getItem("resetEmail");JSON.parse(localStorage.getItem("otpData")||"{}");let v=(e,r)=>{var a;if(!/^\d*$/.test(r))return;let l=[...t];l[e]=r.slice(-1),s(l),r&&e<3&&(null==(a=p.current[e+1])||a.focus())},y=(e,s)=>{if("Backspace"===s.key&&!t[e]&&e>0){var r;null==(r=p.current[e-1])||r.focus()}},j=e=>{var r;e.preventDefault();let a=e.clipboardData.getData("text").replace(/\D/g,""),l=[...t];for(let e=0;e<4;e++)l[e]=a[e]||"";s(l);let c=Math.min(a.length,3);null==(r=p.current[c])||r.focus()};(0,i.useEffect)(()=>{if(0===a)return;let e=setInterval(()=>l(e=>e-1),1e3);return()=>clearInterval(e)},[a]);let N=t.every(e=>""!==e),w=async e=>{e.preventDefault(),n(!0);try{let e=await (0,x.$z)(g);if("success"===e.status){var t;localStorage.setItem("otpData",JSON.stringify(e.data)),d.Ay.success("OTP sent! Please check your email."),l(45),s(["","","",""]),null==(t=p.current[0])||t.focus()}else d.Ay.error(e.message||"Failed to send OTP")}catch(e){d.Ay.error(e.message||"Error sending OTP. Try again.")}finally{n(!1)}};return(0,r.jsx)(h.Zp,{children:(0,r.jsx)(h.Wu,{className:"pt-6",children:(0,r.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),N){n(!0);try{let s=JSON.parse(localStorage.getItem("otpData")||"{}").otp||"";t.join("")===s?(d.Ay.success("OTP verified! You can now reset your password."),e.push("/reset-password")):d.Ay.error("Invalid OTP, please try again.")}catch(e){d.Ay.error("Verification failed. Try again.")}finally{n(!1)}}},className:"space-y-6",children:[(0,r.jsx)(f.J,{className:"text-center block",children:"Verification Code"}),(0,r.jsx)("div",{className:"flex justify-center gap-3",children:t.map((e,t)=>(0,r.jsx)(m.p,{ref:e=>p.current[t]=e,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>v(t,e.target.value),onKeyDown:e=>y(t,e),onPaste:0===t?j:void 0,className:"w-14 h-14 text-center text-xl font-semibold border-2 focus:border-primary",autoComplete:"off"},t))}),(0,r.jsx)(u.$,{type:"submit",disabled:!N||c,className:"w-full bg-primary hover:bg-[#B020C4] text-white font-medium py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Verifying...":"Verify Code"}),(0,r.jsx)("div",{className:"text-center mt-2",children:(0,r.jsx)("button",{type:"button",onClick:w,disabled:a>0||c,className:"text-sm text-purple-600 underline disabled:opacity-50",children:a>0?"Resend OTP in ".concat(a,"s"):"Resend OTP"})})]})})})}function g(){return(0,r.jsx)("div",{className:"h-screen w-full overflow-hidden",children:(0,r.jsxs)("div",{className:"grid h-full grid-cols-1 md:grid-cols-2",children:[(0,r.jsx)("div",{className:"hidden h-full sm:block",children:(0,r.jsx)(n(),{href:"/",children:(0,r.jsx)("div",{className:"relative h-full w-full",children:(0,r.jsx)(l(),{src:"/images/home/auth.webp",alt:"Logo",className:"object-cover",fill:!0,priority:!0})})})}),(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center overflow-y-auto p-4 md:p-8",children:[(0,r.jsx)("div",{className:"w-full max-w-xl",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(n(),{href:"/",children:(0,r.jsx)(l(),{src:"/images/home/logo.png",alt:"Logo",width:130,height:100})}),(0,r.jsxs)("div",{className:"text-center mb-7 mt-5",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-primary mb-1",children:"Enter verification code"}),(0,r.jsx)("p",{className:"text-black",children:"We've sent a 4-digit code to your email address"})]}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(p,{})}),(0,r.jsxs)("div",{className:"text-center text-sm mt-7",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Didn't receive the code? "}),(0,r.jsx)("button",{className:"font-medium text-primary hover:underline",children:"Resend code"})]}),(0,r.jsx)("p",{className:"mt-2",children:(0,r.jsx)(n(),{href:"/forgot-password",className:"font-medium text-primary hover:underline",children:"Back to forgot password"})})]})]})}),(0,r.jsx)("footer",{className:"py-6 text-center text-sm text-muted-foreground",children:(0,r.jsx)("p",{children:"\xa9 2025 ManuscriptPRO. All rights reserved."})})]})]})})}function v(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[134,323,636,593,792],()=>t(7962)),_N_E=e.O()}]);