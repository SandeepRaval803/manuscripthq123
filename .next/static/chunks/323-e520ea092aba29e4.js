"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{8488:(t,e,a)=>{a.d(e,{cn:()=>o});var r=a(69241),n=a(29573);function o(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,n.QP)((0,r.$)(e))}},35627:(t,e,a)=>{a.d(e,{J:()=>s});var r=a(37876);a(14232);var n=a(59773),o=a(8488);function s(t){let{className:e,...a}=t;return(0,r.jsx)(n.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}},53397:(t,e,a)=>{a.d(e,{p:()=>o});var r=a(37876);a(14232);var n=a(8488);function o(t){let{className:e,type:a,...o}=t;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-primary focus-visible:ring-[#CA24D6]/50 focus-visible:ring-[2px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...o})}},89081:(t,e,a)=>{a.d(e,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>o,aR:()=>s,wL:()=>l});var r=a(37876);a(14232);var n=a(8488);function o(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",e),...a})}function c(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...a})}function d(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",e),...a})}function l(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}},89983:(t,e,a)=>{a.d(e,{$:()=>c,r:()=>i});var r=a(37876);a(14232);var n=a(82987),o=a(47137),s=a(8488);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"cursor-pointer bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:" cursor-pointer bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border cursor-pointer bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"cursor-pointer bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"cursor-pointer hover:text-accent-foreground dark:hover:bg-accent/50",link:"cursor-pointer text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(t){let{className:e,variant:a,size:o,asChild:c=!1,...d}=t,l=c?n.DX:"button";return(0,r.jsx)(l,{"data-slot":"button",className:(0,s.cn)(i({variant:a,size:o,className:e})),...d})}},94723:(t,e,a)=>{a.d(e,{$z:()=>i,Bl:()=>f,DG:()=>d,Gy:()=>x,Hm:()=>y,UZ:()=>o,VG:()=>p,W3:()=>v,XU:()=>g,ZA:()=>s,az:()=>n,f3:()=>u,hd:()=>k,iV:()=>m,oB:()=>j,sD:()=>w,uL:()=>b,ug:()=>l,vk:()=>h,xw:()=>c});let r=a(65364).env.NEXT_PUBLIC_API_BASE_URL||"https://apis.manuscripthq.com/api",n=async(t,e)=>{let a=new URLSearchParams;a.append("email",t),a.append("password",e);let n=await fetch("".concat(r,"/user/login"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!n.ok)throw Error((await n.json()).message||"Login failed");return await n.json()},o=async(t,e,a,n,o)=>{let s=new URLSearchParams;s.append("firstName",t),s.append("lastName",e),s.append("email",a),s.append("password",n),"WRITER25"===o&&(s.append("subscription","Premium"),s.append("couponCode","WRITER25"));let i=await fetch("".concat(r,"/user/register"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!i.ok)throw Error((await i.json()).message||"Registration failed");return await i.json()},s=async(t,e)=>{let a={...t,targetCount:Number(t.targetCount)},n=await fetch("".concat(r,"/manuscript/create"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":e},body:JSON.stringify(a)});if(!n.ok){let t="Failed to create manuscript";try{let e=await n.json();e.message&&(t=e.message)}catch(t){}throw Error(t)}return await n.json()},i=async t=>{let e=new URLSearchParams;e.append("email",t);let a=await fetch("".concat(r,"/user/forgotPassword"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()});if(!a.ok){let t=await a.text();console.error("Error response text:",t);let e="Failed to send reset link";try{let a=JSON.parse(t);a.message&&(e=a.message)}catch(t){}throw Error(e)}return await a.json()},c=async(t,e)=>{let a=new URLSearchParams;a.append("password",t);try{let t=await fetch("".concat(r,"/user/changePassword"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","auth-token":e},body:a.toString()});if(!t.ok){let e=await t.json();throw Error(e.message||"Password reset failed")}return await t.json()}catch(t){throw Error(t.message||"Failed to reset password")}},d=async(t,e)=>{let a=new Headers;a.append("auth-token",e),a.append("Content-Type","application/json");let n=JSON.stringify(t);try{let t=await fetch("".concat(r,"/user/updateUser"),{method:"PUT",headers:a,body:n,redirect:"follow"});if(!t.ok){let e=await t.json();throw Error(e.message||"User update failed")}return await t.json()}catch(t){throw console.error("Error updating user details:",t),Error("Failed to update user details")}},l=async t=>{try{let e=await fetch("".concat(r,"/manuscript/get"),{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded","auth-token":t}});return await e.json()}catch(t){throw console.error("Error fetching manuscripts:",t),Error("Failed to fetch manuscripts.")}};async function u(t){let{oldPassword:e,newPassword:a,token:n}=t;try{let t=await fetch("".concat(r,"/user/updatePassword"),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":n},body:JSON.stringify({oldPassword:e,newPassword:a})});return await t.json()}catch(t){return{status:"error",message:t.message||"Network error"}}}async function p(){let t=await fetch("".concat(r,"/videotutorial/getall"));if(!t.ok)throw Error("Failed to fetch tutorials");let e=await t.json();return Array.isArray(e.data)?e.data:[]}let h=async(t,e)=>{try{let a=await fetch("".concat(r,"/manuscript/get/manuscript/").concat(t),{method:"GET",headers:{"Content-Type":"application/json","auth-token":e}}),n=await a.json();if("success"===n.status)return n.data;throw Error("Failed to fetch manuscript.")}catch(t){throw Error("Error fetching manuscript.")}},m=async(t,e)=>{if(!t)return[];try{let a=await fetch("".concat(r,"/checklistCategory/checklist/categories-tasks/").concat(e.selectedManuscript._id),{method:"GET",headers:{"Content-Type":"application/json","auth-token":t}}),n=await a.json();if("success"===n.status&&Array.isArray(n.data))return n.data.map(t=>({id:t.checklistCategory._id,title:t.checklistCategory.title,checklist:t.checklistTasks.map(t=>({id:t._id,title:t.title,subtitle:t.description||null,completed:t.isCompleted,isProOnly:t.isProOnly})),counts:{total:t.counts.total,completed:t.counts.completed,pending:t.counts.pending}}));return[]}catch(t){return console.error("Error fetching categories:",t),[]}},f=async(t,e,a)=>{if(!t||!a||!(null==e?void 0:e.selectedManuscript._id))return{title:"",tasks:[]};try{let n=await fetch("".concat(r,"/checklistCategory/withtasks/").concat(a,"/").concat(e.selectedManuscript._id),{method:"GET",headers:{"Content-Type":"application/json","auth-token":t}}),o=await n.json();if("success"===o.status&&o.data)return{title:o.data.title||"",tasks:o.data.checklistTasks.map(t=>({id:t._id,title:t.title,description:t.description,completed:t.isCompleted,isProOnly:t.isProOnly||!1}))};return{title:"",tasks:[]}}catch(t){return console.error("Error fetching category details:",t),{title:"",tasks:[]}}},g=async(t,e)=>{try{let a=await fetch("".concat(r,"/section/get/tree?manuscriptId=").concat(t),{method:"GET",headers:{"Content-Type":"application/json","auth-token":e}}),n=await a.json();if("success"===n.status)return{manuscript:n.data.manuscript,sections:n.data.sections||[],success:!0};return console.error(n.message),{success:!1,message:n.message}}catch(t){return console.error("Error fetching manuscript tree:",t),{success:!1,message:"Error fetching data."}}},w=async t=>{let{id:e,token:a,manuscriptId:n}=t;return(await fetch("".concat(r,"/checklisttask/get/task/").concat(e,"/").concat(n),{method:"GET",headers:{"Content-Type":"application/json","auth-token":a}})).json()},y=async t=>{let{userId:e,manuscriptId:a,checklistTaskId:n,token:o}=t;return(await fetch("".concat(r,"/userchecklist/toggle"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":o},body:JSON.stringify({userId:e,manuscriptId:a,checklistTaskId:n})})).json()},v=async(t,e)=>{try{let a=await fetch("".concat(r,"/manuscript/get/manuscript/").concat(t),{method:"GET",headers:{"auth-token":e}}),n=await a.json();if("success"===n.status)return n.data;console.error((null==n?void 0:n.message)||"Failed to fetch manuscript.")}catch(t){throw console.error("Error in fetchSelectedManuscript:",t),t}},b=async(t,e)=>{let a=await fetch("".concat(r,"/manuscript/delete/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json","auth-token":e}});if(!a.ok)throw Error("Failed to delete manuscript");return a.json()},k=async(t,e)=>{if(!(null==t?void 0:t.selectedManuscript._id)||!e)return null;try{let a=await fetch("".concat(r,"/editor/all-content?manuscriptId=").concat(t.selectedManuscript._id),{method:"GET",headers:{"Content-Type":"application/json","auth-token":e}}),n=await a.json();if("success"===n.status)return n;throw Error("Failed to load manuscript data")}catch(t){throw Error("Failed to load manuscript data")}},x=async(t,e,a)=>{if(!(null==t?void 0:t.selectedManuscript)||!e)return!1;try{let n=await fetch("".concat(r,"/manuscript/update/").concat(t.selectedManuscript._id),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":e},body:JSON.stringify(a)}),o=await n.json();if("success"===o.status)return!0;throw Error(o.message||"Failed to update manuscript")}catch(t){throw Error("Failed to update manuscript")}},j=async(t,e,a,n)=>{if(!(null==t?void 0:t.selectedManuscript)||!e)return!1;try{let t=await fetch("".concat(r,"/manuscript/update/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":e},body:JSON.stringify(a)}),o=await t.json();if("success"===o.status)return!0;throw Error(o.message||"Failed to update manuscript")}catch(t){throw Error("Failed to update manuscript")}}}}]);